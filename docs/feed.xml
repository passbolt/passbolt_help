<?xml version="1.0" encoding="utf-8"?><feed xmlns="http://www.w3.org/2005/Atom" ><generator uri="https://jekyllrb.com/" version="3.8.4">Jekyll</generator><link href="https://help.passbolt.com/feed.xml" rel="self" type="application/atom+xml" /><link href="https://help.passbolt.com/" rel="alternate" type="text/html" /><updated>2018-10-11T15:09:29+02:00</updated><id>https://help.passbolt.com/feed.xml</id><title type="html">Passbolt | Help</title><subtitle>The help site for passbolt, the open source password manager for teams. This site contains frequently asked questions, article to troubleshoot common issues, installation tutorials, blueprints for developers, and more!</subtitle><entry><title type="html">Configure Ldap plugin</title><link href="https://help.passbolt.com/configure/ldap.html" rel="alternate" type="text/html" title="Configure Ldap plugin" /><published>2018-09-07T02:00:00+02:00</published><updated>2018-09-07T02:00:00+02:00</updated><id>https://help.passbolt.com/configure/ldap</id><content type="html" xml:base="https://help.passbolt.com/configure/ldap.html">&lt;div class=&quot;row&quot;&gt;
  &lt;div class=&quot;col7&quot;&gt;

    &lt;p&gt;&lt;img src=&quot;/assets/img/help/2018/09/AD_ldap_overview.png&quot; alt=&quot;ldap illustration&quot; style=&quot;margin: auto;&quot; /&gt;&lt;/p&gt;

    &lt;div class=&quot;message warning&quot;&gt;
    &lt;p&gt;
        &lt;strong&gt;Important:&lt;/strong&gt; the Ldap connector is currently distributed as an experimental plugin. Although it was 
    tested with the greatest care, it is possible that some bugs are still present that could harm your passbolt 
    installation. It is highly recommended not to use it in a production instance of passbolt.
    &lt;/p&gt;
    
&lt;/div&gt;

    &lt;h2 id=&quot;introduction&quot;&gt;Introduction&lt;/h2&gt;

    &lt;h3 id=&quot;what-is-it&quot;&gt;What is it?&lt;/h3&gt;

    &lt;p&gt;The goal of the directory synchronization tool, also called LDAP connector, is to provide a way for a passbolt 
administrator to synchronize a list of groups and users, as well as the associated group memberships.&lt;/p&gt;

    &lt;p&gt;Currently the connector supports two types of directory: OpenLDAP and Microsoft Active Directory. In the future 
we will also support other non ldap based user directories such as Google API User Directory.&lt;/p&gt;

    &lt;h3 id=&quot;how-does-it-work&quot;&gt;How does it work?&lt;/h3&gt;

    &lt;p&gt;In a nutshell this part of the application will try to keep passbolt and a directory in sync with a minimal 
involvement of the administrators and group managers. However if an action is not possible, such as, deleting 
a user that is the sole password owner, the process triggers will trigger relevant email notifications so 
that a human can solve it manually. An admin can also alternatively tell passbolt to ignore a record in the 
next synchronization round, if the issue does not need to be resolved.&lt;/p&gt;

    &lt;h3 id=&quot;requirements&quot;&gt;Requirements&lt;/h3&gt;

    &lt;p&gt;The directory synchronization tools requires the &lt;a href=&quot;https://secure.php.net/manual/en/book.ldap.php&quot;&gt;php-ldap extension&lt;/a&gt;
to be present on the server. If you built your own server the way you install 
&lt;a href=&quot;https://packages.debian.org/stretch/php-ldap&quot;&gt;php-ldap&lt;/a&gt; will depend on your system flavor.&lt;/p&gt;

    &lt;p&gt;On Debian using nginx for example you can do:&lt;/p&gt;
    &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nb&quot;&gt;sudo &lt;/span&gt;apt-get &lt;span class=&quot;nb&quot;&gt;install &lt;/span&gt;php-ldap 
&lt;span class=&quot;nb&quot;&gt;sudo &lt;/span&gt;service nginx restart
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;

    &lt;p&gt;Make sure the ldap extension is present in the php-cli.ini file. 
You should add &lt;code class=&quot;highlighter-rouge&quot;&gt;extension=ldap.so&lt;/code&gt; if it is not already present:&lt;/p&gt;
    &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;php &lt;span class=&quot;nt&quot;&gt;-i&lt;/span&gt; |grep php&lt;span class=&quot;se&quot;&gt;\.&lt;/span&gt;ini
Configuration File &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;php.ini&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; Path &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; /etc/php/7.0/cli
Loaded Configuration File &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; /etc/php/7.0/cli/php.ini
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;nano /etc/php/7.0/cli/php.ini
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;

    &lt;p&gt;For testing purpose, it might be handy to have the some &lt;a href=&quot;https://wiki.debian.org/LDAP/LDAPUtils&quot;&gt;ldap utilities&lt;/a&gt; 
installed on your system. On Debian you can use ldapsearch for example to search for and display entries:&lt;/p&gt;
    &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nb&quot;&gt;sudo &lt;/span&gt;apt-get &lt;span class=&quot;nb&quot;&gt;install &lt;/span&gt;ldap-utils
ldapsearch &lt;span class=&quot;nt&quot;&gt;-b&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'dc=example,dc=com'&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-x&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;

    &lt;p&gt;The plugin relies on a 3rd party library called ldaptools which you will need to install as part of your passbolt 
update or install. You can get it the same way than other php dependencies using composer:&lt;/p&gt;
    &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nb&quot;&gt;cd&lt;/span&gt; /var/www/passbolt
git pull origin master
composer &lt;span class=&quot;nb&quot;&gt;install&lt;/span&gt;
./bin/cake passbolt migrate
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;

    &lt;p&gt;To run, the ldap plugin needs to have at least one active admin user existing inside passbolt.&lt;/p&gt;

    &lt;h2 id=&quot;limitations&quot;&gt;Limitations&lt;/h2&gt;

    &lt;p&gt;The Ldap plugin doesn’t support nested groups in the current version. This improvement will be added later, 
once groups inside groups is supported by passbolt.&lt;/p&gt;

    &lt;p&gt;A delegated authentication (such as using a LDAP user password as replacement of the passphrase) is currently 
not supported (and is not a trivial problem) but could still be considered in the future. If you are interested 
in this feature you can join the discussion on the 
&lt;a href=&quot;https://community.passbolt.com/t/as-a-user-i-can-login-using-my-organization-ldap-credentials/159&quot;&gt;community forum&lt;/a&gt;.&lt;/p&gt;

    &lt;p&gt;The following improvements will also be shipped gradually and will be available soon:&lt;/p&gt;
    &lt;ul&gt;
      &lt;li&gt;LDAP settings screen: it will be possible to configure and test ldap directly from an admin interface inside passbolt.&lt;/li&gt;
      &lt;li&gt;Report screens: the synchronization reports will be available in the admin user interface.&lt;/li&gt;
    &lt;/ul&gt;

    &lt;h2 id=&quot;how-to-use&quot;&gt;How to use?&lt;/h2&gt;

    &lt;h3 id=&quot;activate-the-plugin&quot;&gt;Activate the plugin&lt;/h3&gt;

    &lt;p&gt;The plugin is deactivated by default. You need to activate it to be able to use it.&lt;/p&gt;

    &lt;p&gt;To do so, simply copy the file &lt;code class=&quot;highlighter-rouge&quot;&gt;/config/ldap.default.php&lt;/code&gt; into &lt;code class=&quot;highlighter-rouge&quot;&gt;ldap.php&lt;/code&gt;.&lt;/p&gt;
    &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nb&quot;&gt;cd&lt;/span&gt; /var/www/passbolt
&lt;span class=&quot;nb&quot;&gt;mv&lt;/span&gt; ./config/ldap.default.php ./config/ldap.php
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;

    &lt;h3 id=&quot;configure-the-plugin&quot;&gt;Configure the plugin&lt;/h3&gt;

    &lt;p&gt;Edit the file &lt;code class=&quot;highlighter-rouge&quot;&gt;ldap.php&lt;/code&gt; and modify the configuration to match your needs. The available options are:&lt;/p&gt;

    &lt;table class=&quot;table-parameters&quot;&gt;
  &lt;thead&gt;
    &lt;tr&gt;
        &lt;th width=&quot;25%&quot;&gt;Parameter&lt;/th&gt;
        &lt;th width=&quot;33%&quot;&gt;Details&lt;/th&gt;
        &lt;th&gt;Example&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
        &lt;td&gt;
        defaultUser&lt;br /&gt;
        &lt;em&gt;(required)&lt;/em&gt;
        &lt;/td&gt;
        &lt;td&gt;
        Enter here the username of the passbolt admin user that will be used to perform the operations on behalf of the synchronization tools. 
        &lt;br /&gt;&lt;br /&gt;You can also create a dedicated admin user in passbolt if you want to be able to track more accurately the actions related to ldap.
        &lt;/td&gt;
        &lt;td&gt;
        &lt;code&gt;passboltadmin@domain.com&lt;/code&gt;
        &lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;
        defaultGroupAdminUser &lt;br /&gt;
        &lt;em&gt;(required)&lt;/em&gt;
        &lt;/td&gt;
        &lt;td&gt;
        Enter here the username of the default group manager. It is the user that will be assigned as a group manager to all new groups created by ldap.
        &lt;/td&gt;
        &lt;td&gt;
        &lt;code&gt;passboltadmin@domain.com&lt;/code&gt;
        &lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;
        fieldsMapping &lt;br /&gt;
        &lt;em&gt;(optional)&lt;/em&gt;
        &lt;/td&gt;
        &lt;td&gt;
        In case of OpenLdap, the default mapping between the passbolt and directory record fields might not be the one that will work for you. In this section you can redefine the default mapping for your directory.
        &lt;/td&gt;
        &lt;td&gt;&lt;pre&gt;'openldap' =&amp;gt; [
  'user' =&amp;gt; [
     'id' =&amp;gt; 'entryUUID',
     'firstname' =&amp;gt; 'firstName',
     'lastname' =&amp;gt; 'lastName',
     'username' =&amp;gt; 'mail',
     'created' =&amp;gt; 'created',
     'modified' =&amp;gt; 'modified',
  ],
  'group' =&amp;gt; [
     'id' =&amp;gt; 'entryUUID',
     'name' =&amp;gt; 'cn',
     'created' =&amp;gt; 'created',
     'modified' =&amp;gt; 'modified',
     'users' =&amp;gt; 'members',
  ],
],&lt;/pre&gt;&lt;/td&gt;
     &lt;/tr&gt;
     &lt;tr&gt;
         &lt;td&gt;
         groupObjectClass&lt;br /&gt;
         &lt;em&gt;(optional)&lt;/em&gt;
         &lt;/td&gt;
         &lt;td&gt;
         For OpenLdap only, you can specify here the name of the group object class that you are using in your openldap.
         &lt;br /&gt;&lt;br /&gt;Default value: groupOfUniqueNames
         &lt;/td&gt;
         &lt;td&gt;
         &lt;code&gt;groupOfUniqueNames&lt;/code&gt;
         &lt;/td&gt;
     &lt;/tr&gt;
     &lt;tr&gt;
          &lt;td&gt;
          userObjectClass&lt;br /&gt;
          &lt;em&gt;(optional)&lt;/em&gt;
          &lt;/td&gt;
          &lt;td&gt;
          For OpenLdap only, you can specify here the name of the user object class that you are using in your openldap.
          &lt;br /&gt;&lt;br /&gt;Default value: inetOrgPerson
          &lt;/td&gt;
          &lt;td&gt;
          &lt;code&gt;inetOrgPerson&lt;/code&gt;
          &lt;/td&gt;
     &lt;/tr&gt;
     &lt;tr&gt;
        &lt;td&gt;
        groupPath&lt;br /&gt;
        &lt;em&gt;(optional)&lt;/em&gt;
        &lt;/td&gt;
        &lt;td&gt;
        If your groups are located in a different path than your base DN, you can specify here the complementary path.
        &lt;br /&gt;&lt;br /&gt;Default value: none
        &lt;/td&gt;
        &lt;td&gt;&lt;code&gt;OU=MyGroups&lt;/code&gt;&lt;/td&gt;
     &lt;/tr&gt;
     &lt;tr&gt;
         &lt;td&gt;
         userPath&lt;br /&gt;
         &lt;em&gt;(optional)&lt;/em&gt;
         &lt;/td&gt;
         &lt;td&gt;
         If your users are located in a different path than your base DN, you can specify here the complementary path.
         &lt;br /&gt;&lt;br /&gt;Default value: none
         &lt;/td&gt;
         &lt;td&gt;&lt;code&gt;OU=MyUsers&lt;/code&gt;&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
           &lt;td&gt;
           jobs&lt;br /&gt;
           &lt;em&gt;(optional)&lt;/em&gt;
           &lt;/td&gt;
           &lt;td&gt;
           By default, the synchronization will be done for all created / deleted users and groups in your directory and all edited group members. You can enable / disable some tasks here.
           &lt;br /&gt;&lt;br /&gt;Default value: see example
           &lt;/td&gt;
           &lt;td&gt;&lt;pre&gt;'jobs' =&amp;gt; [
    'users' =&amp;gt; [
        'create' =&amp;gt; true,
        'delete' =&amp;gt; true,
    ],
    'groups' =&amp;gt; [
        'create' =&amp;gt; true,
        'update' =&amp;gt; true,
        'delete' =&amp;gt; true,
    ],
],
&lt;/pre&gt;&lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
             &lt;td&gt;
             ldap&lt;br /&gt;
             &lt;em&gt;(required)&lt;/em&gt;
             &lt;/td&gt;
             &lt;td&gt;
             This contains the ldap connection details such as the domain name, username, password, base DN, servers, port, etc..
             The options in the config file are self explanatory.
             &lt;/td&gt;
             &lt;td&gt;&lt;pre&gt;'ldap' =&amp;gt; [
  'domains' =&amp;gt; [
      // Active directory.
     'mydomain.local' =&amp;gt; [
          'domain_name' =&amp;gt; 'mydomain.local',
          'username' =&amp;gt; 'johndoe',
          'password' =&amp;gt; 'Compl!c4t3dP4ssw0rD',
          'base_dn' =&amp;gt; 'OU=OrgUsers,DC=mydomain,DC=local',
          'servers' =&amp;gt; ['35.225.111.241'],
          'port' =&amp;gt; 389,
          'use_ssl' =&amp;gt; false,
         'ldap_type' =&amp;gt; 'ad',
      ],
   ],
]&lt;/pre&gt;&lt;/td&gt;
          &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

    &lt;h3 id=&quot;test-the-connection&quot;&gt;Test the connection&lt;/h3&gt;

    &lt;p&gt;Once the configuration options have been entered in ldap.php, you can test that the connection is working and that the objects are retrieved correctly from your directory:&lt;/p&gt;
    &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;./bin/cake directory_sync &lt;span class=&quot;nb&quot;&gt;test&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;

    &lt;p&gt;An output similar to the one below should be observed:&lt;/p&gt;

    &lt;figure&gt;
    &lt;img src=&quot;https://help.passbolt.com/assets/img/help/2018/09/AD_ldap_command_test.png&quot; alt=&quot;Screenshot of directory synchronization test&quot; style=&quot;max-width:750px;&quot; /&gt;
    &lt;span class=&quot;legend&quot;&gt;fig. Screenshot of directory synchronization test&lt;/span&gt;
&lt;/figure&gt;

    &lt;p&gt;&lt;strong&gt;What you should pay attention to:&lt;/strong&gt;&lt;/p&gt;
    &lt;ul&gt;
      &lt;li&gt;Make sure that you can see the same groups and users as the ones available in your directory.&lt;/li&gt;
      &lt;li&gt;Make sure that each user has an email address. If not, they will not validate in passbolt.&lt;/li&gt;
      &lt;li&gt;Make sure that each group is shown with the right number of users.&lt;/li&gt;
    &lt;/ul&gt;

    &lt;h3 id=&quot;first-synchronization&quot;&gt;First synchronization&lt;/h3&gt;
    &lt;p&gt;Before we actually do a real synchronization, we will first simulate one:&lt;/p&gt;
    &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;./bin/cake directory_sync all &lt;span class=&quot;nt&quot;&gt;--dry-run&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
    &lt;p&gt;This command will simulate what will happen when the synchronization will be done for real.&lt;/p&gt;

    &lt;figure&gt;
    &lt;img src=&quot;https://help.passbolt.com/assets/img/help/2018/09/AD_ldap_command_dry_run.png&quot; alt=&quot;Screenshot of directory synchronization sync in dry run&quot; style=&quot;max-width:;&quot; /&gt;
    &lt;span class=&quot;legend&quot;&gt;fig. Screenshot of directory synchronization sync in dry run&lt;/span&gt;
&lt;/figure&gt;

    &lt;p&gt;If the result displayed is similar to what you expect to happen, you can proceed with the actual synchronization:&lt;/p&gt;
    &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;./bin/cake directory_sync all
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;

    &lt;figure&gt;
    &lt;img src=&quot;https://help.passbolt.com/assets/img/help/2018/09/AD_ldap_command_sync.png&quot; alt=&quot;Screenshot of directory synchronization running&quot; style=&quot;max-width:;&quot; /&gt;
    &lt;span class=&quot;legend&quot;&gt;fig. Screenshot of directory synchronization running&lt;/span&gt;
&lt;/figure&gt;

    &lt;p class=&quot;message notice&quot;&gt;
    Please note that a user can be added into a group only once his account is activated.
&lt;/p&gt;

    &lt;h3 id=&quot;run-it-automatically&quot;&gt;Run it automatically&lt;/h3&gt;
    &lt;p&gt;To synchronize the changes automatically you will need to add a cron job. We recommend to execute the job once a day, but you can choose as per your preference.&lt;/p&gt;
    &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;0 0 &lt;span class=&quot;k&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;*&lt;/span&gt; su &lt;span class=&quot;nt&quot;&gt;-c&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;/var/www/passbolt/bin/cake directory_sync all&quot;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-s&lt;/span&gt; /bin/bash www-data &lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&lt;/span&gt; /var/log/cron.log 2&amp;gt;&amp;amp;1
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;

    &lt;h3 id=&quot;ignoring-records&quot;&gt;Ignoring records&lt;/h3&gt;
    &lt;p&gt;It is possible for you to individually ignore synchronization of some of your directory records and/or some users/groups in passbolt, especially when there are some problematics records you do not want to keep in sync. Such records and the command to ignore them will be displayed in the reports.&lt;/p&gt;

    &lt;figure&gt;
    &lt;img src=&quot;https://help.passbolt.com/assets/img/help/2018/09/AD_ldap_ignore_option.png&quot; alt=&quot;Screenshot of directory synchronization with items to ignore&quot; style=&quot;max-width:;&quot; /&gt;
    &lt;span class=&quot;legend&quot;&gt;fig. Screenshot of directory synchronization with items to ignore&lt;/span&gt;
&lt;/figure&gt;

    &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt; ./bin/cake directory_sync ignore-create &lt;span class=&quot;nt&quot;&gt;--id&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;55872084-ed6f-4e96-b401-479dd86ca357 &lt;span class=&quot;nt&quot;&gt;--model&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;DirectoryEntries
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;

    &lt;p&gt;You can also view all the records that are being ignored.&lt;/p&gt;

    &lt;figure&gt;
    &lt;img src=&quot;https://help.passbolt.com/assets/img/help/2018/09/AD_ldap_command_view_ignored.png&quot; alt=&quot;Screenshot of directory synchronization view ignored command&quot; style=&quot;max-width:;&quot; /&gt;
    &lt;span class=&quot;legend&quot;&gt;fig. Screenshot of directory synchronization view ignored command&lt;/span&gt;
&lt;/figure&gt;

    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;./bin/cake directory_sync ignore-list
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;

    &lt;p&gt;You can also stop ignoring them:&lt;/p&gt;
    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;./bin/cake directory_sync ignore-delete --id=16789f75-2cf7-4755-9bd9-634d1ff42240 --model=DirectoryEntries
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;

    &lt;h2 id=&quot;how-to-report-bugs&quot;&gt;How to report bugs&lt;/h2&gt;
    &lt;p&gt;You can contact us directly at &lt;a href=&quot;mailto:contact@passbolt.com&quot;&gt;contact@passbolt.com&lt;/a&gt;. Please mention [LDAP] in the subject so that we can prioritize your message correctly.&lt;/p&gt;

    &lt;div class=&quot;last-updated&quot;&gt;
      &lt;h3&gt;Last updated&lt;/h3&gt;
      &lt;p&gt;This article was last updated on 
September
7th,
2018.&lt;/p&gt;
    &lt;/div&gt;

  &lt;/div&gt;
  &lt;div class=&quot;col4 last push1&quot;&gt;

    &lt;div class=&quot;message tldr notice&quot;&gt;
    &lt;p&gt;Are you experiencing issues with Passbolt Pro?&lt;/p&gt;
    &lt;a href=&quot;mailto:contact@passbolt.com&quot; class=&quot;button primary&quot;&gt;Contact Pro support&lt;/a&gt;
    &lt;p&gt;or &lt;a href=&quot;https://community.passbolt.com&quot;&gt;ask the community&lt;/a&gt;&lt;/p&gt;

&lt;/div&gt;

  &lt;/div&gt;
&lt;/div&gt;</content><author><name></name></author><summary type="html"></summary></entry><entry><title type="html">Update passbolt server component (v2)</title><link href="https://help.passbolt.com/hosting/update.html" rel="alternate" type="text/html" title="Update passbolt server component (v2)" /><published>2018-05-02T02:00:00+02:00</published><updated>2018-05-02T02:00:00+02:00</updated><id>https://help.passbolt.com/hosting/update</id><content type="html" xml:base="https://help.passbolt.com/hosting/update.html">&lt;div class=&quot;row&quot;&gt;
  &lt;div class=&quot;col7&quot;&gt;

    &lt;h2 id=&quot;which-update-process-to-follow&quot;&gt;Which update process to follow?&lt;/h2&gt;

    &lt;p&gt;Each passbolt release follows the concept of &lt;a href=&quot;http://www.semver.org&quot;&gt;Semantic Versioning&lt;/a&gt;. Given a version number MAJOR.MINOR.PATCH, we increment as follow:&lt;/p&gt;

    &lt;ul&gt;
      &lt;li&gt;&lt;strong&gt;PATCH&lt;/strong&gt; version when we make backwards-compatible bug fixes. So let’s say you are running passbolt v2.0.2 and the latest one available is v2.0.3 you will need to perform a patch update.&lt;/li&gt;
      &lt;li&gt;&lt;strong&gt;MINOR&lt;/strong&gt; version when we add functionality in a backwards-compatible manner. Similarly say you have passbolt v2.0.3 installed and the latest version available is v2.1.0, you will need to perform a minor version update.&lt;/li&gt;
      &lt;li&gt;&lt;strong&gt;MAJOR&lt;/strong&gt; version when incompatible API changes are made. You get the deal for major version update: that would mean going from v1 to v2 for example.&lt;/li&gt;
    &lt;/ul&gt;

    &lt;h2 id=&quot;where-to-find-the-latest-release-version-number&quot;&gt;Where to find the latest release version number?&lt;/h2&gt;

    &lt;p&gt;You can find information about which version is the latest in the &lt;a href=&quot;?php echo Router::url('/release/notes',true); ?&quot;&gt;release notes&lt;/a&gt;. It is generally a good idea to check these notes before running an update. You can also find it on the official &lt;a href=&quot;https://github.com/passbolt/passbolt_api/blob/master/app/Config/version.php&quot;&gt;GIT repository&lt;/a&gt;.&lt;/p&gt;

    &lt;h2 id=&quot;where-to-find-the-version-number-for-a-given-installation&quot;&gt;Where to find the version number for a given installation?&lt;/h2&gt;

    &lt;p&gt;You can check &lt;code class=&quot;highlighter-rouge&quot;&gt;app/Config/version.php&lt;/code&gt; to know the version number for your local instance. You can also hover on the &lt;em&gt;&lt;span class=&quot;visuallyhidden&quot;&gt;heart&lt;/span&gt;&lt;/em&gt; icon at the bottom right corner of any passbolt screen. The first item is the server version, the second the one from the browser extension.&lt;/p&gt;

    &lt;figure&gt;
    &lt;img src=&quot;https://help.passbolt.com/assets/img/help/2018/05/AN_footer_version_help.png&quot; alt=&quot;footer version helper&quot; style=&quot;max-width:210px;&quot; /&gt;
    &lt;span class=&quot;legend&quot;&gt;fig. footer version helper&lt;/span&gt;
&lt;/figure&gt;

    &lt;h2 id=&quot;major-update&quot;&gt;Major update&lt;/h2&gt;

    &lt;p&gt;Please see the following documentation to &lt;a href=&quot;/hosting/upgrade&quot;&gt;Update from v1 to v2&lt;/a&gt;&lt;/p&gt;

    &lt;h2 id=&quot;minor-update&quot;&gt;Minor update&lt;/h2&gt;

    &lt;p&gt;Every now and again some releases will introduce some database and/or configuration files changes. 
Here is a step by step guide on how to perform a minor update. Just replace the version numbers where necessary.&lt;/p&gt;

    &lt;h4 id=&quot;take-your-site-down&quot;&gt;1. Take your site down&lt;/h4&gt;

    &lt;p&gt;Create a temporary webserver configuration to redirect all the requests to a maintenance page. 
You can find resources how to do this online: &lt;a href=&quot;http://stackoverflow.com/questions/21709026/apache-enable-maintenance-mode-across-all-virtual-hosts&quot;&gt;here is an example for apache&lt;/a&gt; .&lt;/p&gt;

    &lt;h4 id=&quot;get-the-latest-release&quot;&gt;2. Get the latest release&lt;/h4&gt;

    &lt;p&gt;You can also pull the latest version directly from master:&lt;/p&gt;
    &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;git pull origin master
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;

    &lt;p&gt;You can also pull specific versions:&lt;/p&gt;
    &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;git fetch
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;git checkout tags/v2.3.0
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;

    &lt;h4 id=&quot;update-the-libraries&quot;&gt;3. Update the libraries&lt;/h4&gt;

    &lt;p&gt;Some libraries are not packaged with the software but need to be updated using composer, based on 
what is recommended in the composer.lock. This file is provided by passbolt.&lt;/p&gt;

    &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;composer &lt;span class=&quot;nb&quot;&gt;install&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;--no-dev&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;

    &lt;h4 id=&quot;run-the-migration-script&quot;&gt;4. Run the migration script&lt;/h4&gt;

    &lt;p&gt;You can run the database migration scripts as follow:&lt;/p&gt;
    &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;./bin/cake passbolt migrate &lt;span class=&quot;nt&quot;&gt;--backup&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;

    &lt;p&gt;As you can see with the command above you can optional ask the application to create a database backup.
This is usefull in case you run into any issues with the new version and need to revert to an old but working one.&lt;/p&gt;

    &lt;p&gt;This backup will be placed in &lt;code class=&quot;highlighter-rouge&quot;&gt;./tmp/cache/database/backup/backup_timestamp.sql&lt;/code&gt;.&lt;/p&gt;

    &lt;h4 id=&quot;put-your-site-back-online&quot;&gt;5. Put your site back online!&lt;/h4&gt;

    &lt;p&gt;As an administrator (or as any user in debug mode) you can go and check on the /healthcheck page to see 
if your instance configuration is looking good.&lt;/p&gt;

    &lt;h2 id=&quot;patch-update&quot;&gt;Patch update&lt;/h2&gt;

    &lt;p&gt;Performing a patch update is the easiest. All you need to do is checkout the latest version.&lt;/p&gt;
    &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;git pull origin master
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;

    &lt;p&gt;You can also checkout a specific version and use branches to switch versions. For example for version 2.0.3:&lt;/p&gt;

    &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;git fetch &lt;span class=&quot;nt&quot;&gt;--tags&lt;/span&gt;
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;git checkout tags/v2.3.0 &lt;span class=&quot;nt&quot;&gt;-b&lt;/span&gt; tags/v2.3.0
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;

    &lt;h2 id=&quot;troubleshooting&quot;&gt;Troubleshooting&lt;/h2&gt;

    &lt;h4 id=&quot;verifying-the-status-of-the-application&quot;&gt;Verifying the status of the application&lt;/h4&gt;
    &lt;p&gt;Optionally, you can login as an administrator and check the status on the healthcheck page:&lt;/p&gt;

    &lt;figure&gt;
    &lt;img src=&quot;https://help.passbolt.com/assets/img/screenshots/AD_healthcheck.jpg&quot; alt=&quot;Example of healthcheck screen&quot; style=&quot;max-width:;&quot; /&gt;
    &lt;span class=&quot;legend&quot;&gt;fig. Example of healthcheck screen&lt;/span&gt;
&lt;/figure&gt;

    &lt;p&gt;You can also run the following command:&lt;/p&gt;
    &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;./bin/cake passbolt healthcheck
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;

    &lt;h4 id=&quot;if-you-run-into-some-issues&quot;&gt;If you run into some issues&lt;/h4&gt;

    &lt;p&gt;If you run into some issues:&lt;/p&gt;
    &lt;ul&gt;
      &lt;li&gt;Make a copy or screenshot of the errors messages displayed on the screen&lt;/li&gt;
      &lt;li&gt;Check for error message in the &lt;code class=&quot;highlighter-rouge&quot;&gt;logs&lt;/code&gt; directory&lt;/li&gt;
      &lt;li&gt;Check for error message in the browser console&lt;/li&gt;
      &lt;li&gt;Checkout the previous working version using git&lt;/li&gt;
      &lt;li&gt;Drop the database and load your backup data to restore to a previously working version&lt;/li&gt;
      &lt;li&gt;Note down the the details of you environment: your OS, php, mysql environment versions.&lt;/li&gt;
    &lt;/ul&gt;

    &lt;p&gt;Where to get help:&lt;/p&gt;
    &lt;ul&gt;
      &lt;li&gt;If you are a Passbolt Pro Edition subscriber send us an &lt;a href=&quot;mailto:contact@passbolt.com&quot;&gt;email&lt;/a&gt; with the details.&lt;/li&gt;
      &lt;li&gt;If you are a Passbolt Community Edition user you can open new thread on the &lt;a href=&quot;https://community.passbolt.com/c/installation-issues&quot;&gt;community forum&lt;/a&gt;.&lt;/li&gt;
    &lt;/ul&gt;

    &lt;p&gt;The more information you provide about what you did, what you tried, how your environment look like,
the easiest it will be for people to help you.&lt;/p&gt;

    &lt;div class=&quot;last-updated&quot;&gt;
      &lt;h3&gt;Last updated&lt;/h3&gt;
      &lt;p&gt;This article was last updated on 
May
2nd,
2018.&lt;/p&gt;
    &lt;/div&gt;

  &lt;/div&gt;
  &lt;div class=&quot;col4 last push1&quot;&gt;

    &lt;div class=&quot;message tldr&quot;&gt;
    &lt;p&gt;Are you still using passbolt v1? Check out the previous version of this article.&lt;/p&gt;
    
    &lt;a href=&quot;/hosting/update-v1&quot; class=&quot;button &quot;&gt;See previous version&lt;/a&gt;
    
&lt;/div&gt;

    &lt;div class=&quot;message tldr notice&quot;&gt;
    &lt;p&gt;Are you experiencing issues when updating passbolt?&lt;/p&gt;
    
    &lt;a href=&quot;https://community.passbolt.com/c/installation-issues&quot; class=&quot;button primary&quot;&gt;Ask the community!&lt;/a&gt;
    
&lt;/div&gt;

    &lt;div class=&quot;message &quot;&gt;
    &lt;p&gt;&lt;/p&gt;
    
&lt;/div&gt;

  &lt;/div&gt;
&lt;/div&gt;</content><author><name></name></author><category term="hosting" /><summary type="html"></summary></entry><entry><title type="html">Upgrade to Passbolt Pro</title><link href="https://help.passbolt.com/hosting/upgrade/pro/upgrade-pro-from-ce.html" rel="alternate" type="text/html" title="Upgrade to Passbolt Pro" /><published>2018-04-15T02:00:00+02:00</published><updated>2018-04-15T02:00:00+02:00</updated><id>https://help.passbolt.com/hosting/upgrade/pro/upgrade-pro-from-ce</id><content type="html" xml:base="https://help.passbolt.com/hosting/upgrade/pro/upgrade-pro-from-ce.html">&lt;div class=&quot;row&quot;&gt;
  &lt;div class=&quot;col7&quot;&gt;

    &lt;p&gt;There are many ways you can upgrade your version 1 or version 2 Community Edition (CE) to Passbolt Pro.
This page list the options and will point you to the right manual.&lt;/p&gt;

    &lt;h3 id=&quot;upgrade-from-ce-v2&quot;&gt;Upgrade from CE v2&lt;/h3&gt;

    &lt;ul&gt;
      &lt;li&gt;&lt;a href=&quot;/hosting/upgrade/pro/upgrade-pro-from-ce-v2&quot;&gt;Upgrade CE v2.x to Pro using source&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;/hosting/upgrade/pro/upgrade-pro-from-v2-docker&quot;&gt;Upgrade CE v2.x to Pro using docker&lt;/a&gt;&lt;/li&gt;
    &lt;/ul&gt;

    &lt;h3 id=&quot;upgrade-from-v1&quot;&gt;Upgrade from v1&lt;/h3&gt;

    &lt;h4 id=&quot;using-docker&quot;&gt;Using docker&lt;/h4&gt;
    &lt;ul&gt;
      &lt;li&gt;&lt;a href=&quot;/hosting/upgrade/pro/upgrade-pro-from-v1-docker&quot;&gt;Upgrade CE v2.x to Pro using docker&lt;/a&gt;&lt;/li&gt;
    &lt;/ul&gt;

    &lt;h4 id=&quot;using-source&quot;&gt;Using source&lt;/h4&gt;
    &lt;p&gt;If the server running Passbolt V1 doesn’t and cannot match the requirements listed bellow, you will need a new server 
to upgrade to Passbolt Pro.&lt;/p&gt;

    &lt;ul&gt;
      &lt;li&gt;&lt;a href=&quot;/hosting/upgrade/pro/upgrade-pro-from-ce-v1-same-server&quot;&gt;Upgrade CE v1.x to Pro on the same server&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;/hosting/upgrade/pro/upgrade-pro-from-ce-v1-new-server&quot;&gt;Upgrade CE v1.x to Pro on a new server&lt;/a&gt;&lt;/li&gt;
    &lt;/ul&gt;

    &lt;h3 id=&quot;can-i-upgrade-on-the-same-server&quot;&gt;Can I upgrade on the same server?&lt;/h3&gt;
    &lt;p&gt;If the server running Passbolt v1 matches the requirements listed bellow, you can upgrade to Passbolt Pro on the same server.
If it does not match, you can also upgrade your distribution packages, or install on a new server.
Generally the major dependency upgrade is PHP7. (In Debian, using dotdeb replacements work like a charm).&lt;/p&gt;

    &lt;h4 id=&quot;requirements&quot;&gt;Requirements&lt;/h4&gt;
    &lt;p&gt;Passbolt is reported to work on a large variety of operating system configurations. 
Therefore this help page is a generic guide that should work for most environments.&lt;/p&gt;

    &lt;p&gt;If you run into any issues with your particular configuration, 
&lt;a href=&quot;https://community.passbolt.com/c/installation-issues&quot;&gt;please check the forum&lt;/a&gt;. 
Maybe someone else has had your issue. If not, make a post and the community will try to help you.&lt;/p&gt;

    &lt;ul&gt;
      &lt;li&gt;Any Unix-like major distribution (Debian, Centos, Ubuntu, *BSD)&lt;/li&gt;
      &lt;li&gt;A webserver (Apache or Nginx)&lt;/li&gt;
      &lt;li&gt;A TLS server certificate for HTTPS&lt;/li&gt;
      &lt;li&gt;PHP &amp;gt;= 7.0.0&lt;/li&gt;
      &lt;li&gt;Mysql &amp;gt;= 5.5.59&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;https://getcomposer.org/download/&quot;&gt;Composer&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;https://gnupg.org/&quot;&gt;GnuPG&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;https://git-scm.com/&quot;&gt;Git&lt;/a&gt;&lt;/li&gt;
    &lt;/ul&gt;

    &lt;p&gt;The following PHP extensions (that may or may not come by default):&lt;/p&gt;
    &lt;ul&gt;
      &lt;li&gt;&lt;a href=&quot;http://php.net/manual/en/gnupg.installation.php&quot;&gt;PHP-GNUPG&lt;/a&gt;: for key verification and authentication.&lt;/li&gt;
      &lt;li&gt;Cakephp default requirements: Intl, mbstring, simplexml&lt;/li&gt;
      &lt;li&gt;Image manipulation: gd or imagick&lt;/li&gt;
      &lt;li&gt;Database: Mysqlnd, pdo, pdo_mysql&lt;/li&gt;
      &lt;li&gt;Some general default: xsl, phar, posix, xml, zlib, ctype, curl, json.&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;https://secure.php.net/manual/en/ldap.installation.php&quot;&gt;Ldap&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&amp;amp; more depending on your configuration (for example if you want to use memcache for sessions).&lt;/li&gt;
    &lt;/ul&gt;

    &lt;div class=&quot;last-updated&quot;&gt;
      &lt;h3&gt;Last updated&lt;/h3&gt;
      &lt;p&gt;This article was last updated on 
April
15th,
2018.&lt;/p&gt;
    &lt;/div&gt;

  &lt;/div&gt;
  &lt;div class=&quot;col4 last push1&quot;&gt;

    &lt;div class=&quot;message tldr notice&quot;&gt;
    &lt;p&gt;Are you experiencing issues with Passbolt Pro?&lt;/p&gt;
    &lt;a href=&quot;mailto:contact@passbolt.com&quot; class=&quot;button primary&quot;&gt;Contact Pro support&lt;/a&gt;
    &lt;p&gt;or &lt;a href=&quot;https://community.passbolt.com&quot;&gt;ask the community&lt;/a&gt;&lt;/p&gt;

&lt;/div&gt;

  &lt;/div&gt;
&lt;/div&gt;</content><author><name></name></author><summary type="html"></summary></entry><entry><title type="html">Upgrade Passbolt docker from v1</title><link href="https://help.passbolt.com/hosting/upgrade/ce/upgrade-docker-ce.html" rel="alternate" type="text/html" title="Upgrade Passbolt docker from v1" /><published>2018-04-10T02:00:00+02:00</published><updated>2018-04-10T02:00:00+02:00</updated><id>https://help.passbolt.com/hosting/upgrade/ce/upgrade-docker-ce</id><content type="html" xml:base="https://help.passbolt.com/hosting/upgrade/ce/upgrade-docker-ce.html">&lt;div class=&quot;row&quot;&gt;
  &lt;div class=&quot;col7&quot;&gt;

    &lt;p&gt;This tutorial covers the case where you want to upgrade your current docker installation of passbolt CE v1.x into passbolt CE v2.x.&lt;/p&gt;

    &lt;div class=&quot;message warning&quot;&gt;
    &lt;p&gt;
        &lt;strong&gt;Important:&lt;/strong&gt; Please take a full &lt;a href=&quot;/hosting/backup-v1&quot;&gt;backup&lt;/a&gt; of your passbolt before proceeding with the upgrade. Backup should include passbolt files as well as the database.
    &lt;/p&gt;
    
&lt;/div&gt;

    &lt;h2 id=&quot;upgrade-from-v1610-debian&quot;&gt;Upgrade from v1.6.10-debian&lt;/h2&gt;

    &lt;p&gt;Passbolt v2 introduces several changes that are important to keep in mind when upgrading:&lt;/p&gt;

    &lt;h4 id=&quot;changes-environment-variables&quot;&gt;Changes: Environment variables&lt;/h4&gt;

    &lt;p&gt;The set of environment variables have changed and users should take some time to get familiar with the new ones. For example in case of the database env variables:&lt;/p&gt;

    &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;DB_USER is now DATASOURCES_DEFAULT_USERNAME
DB_HOST is now DATASOURCES_DEFAULT_HOST
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
    &lt;p&gt;There is a more detailed list in passbolt_docker &lt;a href=&quot;https://github.com/passbolt/passbolt_docker/blob/master/README.md&quot;&gt;README&lt;/a&gt; file.&lt;/p&gt;

    &lt;h4 id=&quot;changes-configuration-files&quot;&gt;Changes: Configuration files&lt;/h4&gt;

    &lt;p&gt;No more core.php, email.php or database.php.
Any user that does not want to use environment variables must configure passbolt using:&lt;/p&gt;
    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;/var/www/passbolt/config/passbolt.php
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
    &lt;p&gt;Passbolt will look for for configuration values in &lt;code class=&quot;highlighter-rouge&quot;&gt;passbolt.php&lt;/code&gt;. Wether &lt;code class=&quot;highlighter-rouge&quot;&gt;passbolt.php&lt;/code&gt; does not exist or the configuration section is not defined on it, passbolt will then look for configuration details in default.php which relies on environment variables/default values.
Gpg config directory has changed slightly its path from:&lt;/p&gt;

    &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;/var/www/passbolt/app/Config/gpg/ to /var/www/passbolt/config/gpg
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;

    &lt;p&gt;Gpg default server key file names also changed:&lt;/p&gt;

    &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;serverkey.private.asc to serverkey_private.asc
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;

    &lt;h4 id=&quot;changes-www-user&quot;&gt;Changes: www user&lt;/h4&gt;

    &lt;p&gt;Passbolt container is now running under the www-data user&lt;/p&gt;

    &lt;h4 id=&quot;changes-images-directory&quot;&gt;Changes: images directory&lt;/h4&gt;

    &lt;p&gt;Path to the images directory is different:&lt;/p&gt;

    &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;/var/www/passbolt/app/webroot/img/public/images to /var/www/passbolt/webroot/img/public/images
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;

    &lt;p&gt;Users must also rename ProfileAvatar to Avatar directory inside public/images in order to see images in passbolt v2&lt;/p&gt;

    &lt;h4 id=&quot;changes-supervisor&quot;&gt;Changes: supervisor&lt;/h4&gt;

    &lt;p&gt;In order to manage the running process in passbolt container we introduced supervisord. Users are now able to restart passbolt container processes using:&lt;/p&gt;

    &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;docker &lt;span class=&quot;nb&quot;&gt;exec &lt;/span&gt;passbolt supervisorctl restart &amp;lt;php-fpm|nginx|cron&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;

    &lt;p&gt;Now that we have a better overview of the changes let’s start with the upgrading process!&lt;/p&gt;

    &lt;h3 id=&quot;backup-mysql-database&quot;&gt;Backup mysql database&lt;/h3&gt;

    &lt;p&gt;First of all is encouraged to backup all the relevant data that is:&lt;/p&gt;
    &lt;ul&gt;
      &lt;li&gt;Database&lt;/li&gt;
      &lt;li&gt;Images&lt;/li&gt;
      &lt;li&gt;Server public and private keys&lt;/li&gt;
    &lt;/ul&gt;

    &lt;p&gt;You might want to check the detailed &lt;a href=&quot;/hosting/backup-v1&quot;&gt;backup list for v1&lt;/a&gt;&lt;/p&gt;

    &lt;p&gt;There are multiple ways to backup your database following there is an example using the passbolt container:&lt;/p&gt;
    &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;docker &lt;span class=&quot;nb&quot;&gt;exec &lt;/span&gt;passbolt mysqldump &lt;span class=&quot;nt&quot;&gt;-h&lt;/span&gt; &amp;lt;db_host&amp;gt; &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
                                 &lt;span class=&quot;nt&quot;&gt;-u&lt;/span&gt; passbolt &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
                                 &lt;span class=&quot;nt&quot;&gt;-pP4ssb0lt&lt;/span&gt; &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
                                 passbolt &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; dump.sql
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;

    &lt;p&gt;This will output a dump.sql file on the host machine.&lt;/p&gt;

    &lt;h3 id=&quot;backup-images-directory&quot;&gt;Backup images directory&lt;/h3&gt;

    &lt;p&gt;If you are mounting the images directory using a bind mount just copy the host image directory in a safe location.
If you are using docker volumes to persist your images directory, or not persisting the images directory at all, you can execute the following to copy your images to the host machine.&lt;/p&gt;

    &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;docker &lt;span class=&quot;nb&quot;&gt;cp &lt;/span&gt;passbolt:/var/www/app/webroot/img/public public_images_backup
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
    &lt;p&gt;This will output a public_images_directory with the images stored in the passbolt container.&lt;/p&gt;

    &lt;h3 id=&quot;backup-gpg-keys&quot;&gt;Backup gpg keys&lt;/h3&gt;

    &lt;p&gt;As with the previous section you can proceed exactly the same with the gpg keys:&lt;/p&gt;

    &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;docker &lt;span class=&quot;nb&quot;&gt;cp &lt;/span&gt;passbolt:/var/www/app/Config/gpg/ gpg_keys_backup
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;

    &lt;p&gt;This will output a gpg_keys_backup directory with the contents of the gpg configuration folder of passbolt.&lt;/p&gt;

    &lt;h2 id=&quot;getting-passbolt-container&quot;&gt;Getting passbolt container&lt;/h2&gt;

    &lt;p&gt;Passbolt containers follow the following tagging:&lt;/p&gt;

    &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&amp;lt;version_number&amp;gt;-&amp;lt;build_number&amp;gt;-debian
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;

    &lt;p&gt;Nobody is perfect so we also provide a  &lt;em&gt;latest&lt;/em&gt; tag for Passbolt containers. Through all this documentation pages we make use of the latest tag so users will get the last version of passbolt.
However, it is recommended that users pull the tags pointing to specific passbolt versions when running in environments other than testing.&lt;/p&gt;

    &lt;p&gt;Get passbolt  latest docker container:&lt;/p&gt;
    &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;docker pull passbolt/passbolt:latest
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;

    &lt;h2 id=&quot;upgrade-using-latest-v1-version-1610&quot;&gt;Upgrade using latest v1 version (1.6.10)&lt;/h2&gt;

    &lt;p&gt;Passbolt  v2 will run the database migrations if needed when starting up. Users just need to provide the gpg keys, configuration files/env variables and images.
Following some examples:&lt;/p&gt;

    &lt;h3 id=&quot;using-host-bind-mounts&quot;&gt;Using host bind mounts&lt;/h3&gt;

    &lt;p&gt;Users that use host bind mounts from host machine into docker file must adjust paths of the mounted files:&lt;/p&gt;

    &lt;p&gt;In the following snippet:&lt;/p&gt;
    &lt;ul&gt;
      &lt;li&gt;passbolt_images_dir: path to a host directory that contains passbolt images Avatar directory.&lt;/li&gt;
      &lt;li&gt;gpg_host_dir: path to a host directory that contains serverkey.asc and serverkey_private.asc&lt;/li&gt;
    &lt;/ul&gt;

    &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;docker run &lt;span class=&quot;nt&quot;&gt;--name&lt;/span&gt; passbolt &lt;span class=&quot;nt&quot;&gt;--net&lt;/span&gt; passbolt_network &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
             &lt;span class=&quot;nt&quot;&gt;--mount&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;type&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;bind&lt;/span&gt;, &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
               &lt;span class=&quot;nb&quot;&gt;source&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&amp;lt;passbolt_images_dir&amp;gt;,&lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
               &lt;span class=&quot;nv&quot;&gt;target&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;/var/www/passbolt/webroot/img &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
             &lt;span class=&quot;nt&quot;&gt;--mount&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;type&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;bind&lt;/span&gt;, &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
               &lt;span class=&quot;nb&quot;&gt;source&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&amp;lt;gpg_host_dir&amp;gt;, &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
               &lt;span class=&quot;nv&quot;&gt;target&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;/var/www/passbolt/config/gpg &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
             &lt;span class=&quot;nt&quot;&gt;-e&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;DATASOURCES_DEFAULT_HOST&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;mysql &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
             &lt;span class=&quot;nt&quot;&gt;-e&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;DATASOURCES_DEFAULT_PASSWORD&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&amp;lt;mysql_password&amp;gt; &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
             &lt;span class=&quot;nt&quot;&gt;-e&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;DATASOURCES_DEFAULT_USERNAME&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&amp;lt;mysql_user&amp;gt; &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
             &lt;span class=&quot;nt&quot;&gt;-e&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;DATASOURCES_DEFAULT_DATABASE&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&amp;lt;mysql_database&amp;gt; &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
             &lt;span class=&quot;nt&quot;&gt;-e&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;APP_FULL_BASE_URL&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;https://mydomain.com &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
             passbolt/passbolt:latest
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;

    &lt;h3 id=&quot;using-docker-volumes&quot;&gt;Using docker volumes&lt;/h3&gt;

    &lt;p&gt;Users that use docker volumes should adjust their volumes paths.&lt;/p&gt;

    &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;docker run &lt;span class=&quot;nt&quot;&gt;--name&lt;/span&gt; passbolt &lt;span class=&quot;nt&quot;&gt;--net&lt;/span&gt; passbolt_network &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
             &lt;span class=&quot;nt&quot;&gt;--mount&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;source&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&amp;lt;passbolt_images_volume&amp;gt;,&lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
               &lt;span class=&quot;nv&quot;&gt;target&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;/var/www/passbolt/webroot/img &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
             &lt;span class=&quot;nt&quot;&gt;--mount&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;source&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&amp;lt;gpg_keys_volume&amp;gt;, &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
               &lt;span class=&quot;nv&quot;&gt;target&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;/var/www/passbolt/config/gpg &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
             &lt;span class=&quot;nt&quot;&gt;-e&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;DATASOURCES_DEFAULT_HOST&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;mysql &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
             &lt;span class=&quot;nt&quot;&gt;-e&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;DATASOURCES_DEFAULT_PASSWORD&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&amp;lt;mysql_password&amp;gt; &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
             &lt;span class=&quot;nt&quot;&gt;-e&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;DATASOURCES_DEFAULT_USERNAME&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&amp;lt;mysql_user&amp;gt; &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
             &lt;span class=&quot;nt&quot;&gt;-e&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;DATASOURCES_DEFAULT_DATABASE&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&amp;lt;mysql_database&amp;gt; &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
             &lt;span class=&quot;nt&quot;&gt;-e&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;APP_FULL_BASE_URL&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;https://mydomain.com &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
             passbolt/passbolt:latest
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;

    &lt;div class=&quot;last-updated&quot;&gt;
      &lt;h3&gt;Last updated&lt;/h3&gt;
      &lt;p&gt;This article was last updated on 
April
10th,
2018.&lt;/p&gt;
    &lt;/div&gt;

  &lt;/div&gt;
  &lt;div class=&quot;col4 last push1&quot;&gt;

    &lt;div class=&quot;message tldr notice&quot;&gt;
    &lt;p&gt;Are you experiencing issues when installing passbolt?&lt;/p&gt;
    
    &lt;a href=&quot;https://community.passbolt.com/c/installation-issues&quot; class=&quot;button primary&quot;&gt;Ask the community!&lt;/a&gt;
    
&lt;/div&gt;

    &lt;div class=&quot;tldr&quot;&gt;
    &lt;h4 class=&quot;visuallyhidden&quot;&gt;Available on docker hub&lt;/h4&gt;
    &lt;p&gt;
        &lt;a href=&quot;https://hub.docker.com/r/passbolt/passbolt/&quot; target=&quot;_blank&quot; rel=&quot;noopener nofollow&quot;&gt;
            &lt;img alt=&quot;Docker Logo&quot; src=&quot;/assets/img/third_party/docker_small_h.png&quot; style=&quot;&quot; /&gt;
        &lt;/a&gt;
    &lt;/p&gt;
    &lt;a href=&quot;https://hub.docker.com/r/passbolt/passbolt/&quot; class=&quot;primary button&quot;&gt;
        Get passbolt container!
    &lt;/a&gt;
&lt;/div&gt;

    &lt;div class=&quot;message tldr&quot;&gt;
    &lt;p&gt;Something is not accurate in this documentation? You can contribute by opening an issue or making pull requests!&lt;/p&gt;
    
    &lt;a href=&quot;https://www.github.com/passbolt/passbolt_help&quot; class=&quot;button &quot;&gt;View on github&lt;/a&gt;
    
&lt;/div&gt;

    &lt;div class=&quot;message tldr notice&quot;&gt;
    &lt;p&gt;We highly recommend that you install https on your server. You can get a free SSL certificate with the let's encrypt initiative.&lt;/p&gt;
    
    &lt;a href=&quot;https://letsencrypt.org/&quot; class=&quot;button &quot;&gt;let's encrypt!&lt;/a&gt;
    
&lt;/div&gt;

  &lt;/div&gt;
&lt;/div&gt;</content><author><name></name></author><summary type="html"></summary></entry><entry><title type="html">Using Passbolt pro virtual machine appliance</title><link href="https://help.passbolt.com/hosting/install/pro/vm.html" rel="alternate" type="text/html" title="Using Passbolt pro virtual machine appliance" /><published>2018-04-10T02:00:00+02:00</published><updated>2018-04-10T02:00:00+02:00</updated><id>https://help.passbolt.com/hosting/install/pro/vm</id><content type="html" xml:base="https://help.passbolt.com/hosting/install/pro/vm.html">&lt;div class=&quot;row&quot;&gt;
  &lt;div class=&quot;col7&quot;&gt;

    &lt;h2 id=&quot;description&quot;&gt;Description&lt;/h2&gt;

    &lt;p&gt;Passbolt Pro provides a virtual appliance in OVA format. Users can import this appliance on their private virtualization platform and start enjoying Passbolt Pro.
The VM includes the following software:&lt;/p&gt;
    &lt;ul&gt;
      &lt;li&gt;Debian 9.4&lt;/li&gt;
      &lt;li&gt;Nginx&lt;/li&gt;
      &lt;li&gt;Php-fpm&lt;/li&gt;
      &lt;li&gt;Mariadb&lt;/li&gt;
      &lt;li&gt;Passbolt Pro preinstalled&lt;/li&gt;
      &lt;li&gt;certbot&lt;/li&gt;
      &lt;li&gt;haveged to fill the entropy pool faster&lt;/li&gt;
      &lt;li&gt;Scripts to easy managing SSL setup of the VM&lt;/li&gt;
    &lt;/ul&gt;

    &lt;h2 id=&quot;getting-passbolt-pro-vm&quot;&gt;Getting Passbolt Pro VM&lt;/h2&gt;

    &lt;p&gt;Download the ova and the SHA512SUM.txt:&lt;/p&gt;

    &lt;ul&gt;
      &lt;li&gt;&lt;a href=&quot;https://www.passbolt.com/pro/download/vm/debian/latest&quot;&gt;Passbolt Pro VM&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;https://www.passbolt.com/pro/download/vm/debian/latest-checksum&quot;&gt;SHA512SUM.txt&lt;/a&gt;&lt;/li&gt;
    &lt;/ul&gt;

    &lt;p&gt;Import the ova file using virtualbox, vmware or any other platform that supports OVA files.&lt;/p&gt;

    &lt;p&gt;Once imported into users should be able to boot the VM and just point to the VM ip address with their web browser to initiate the passbolt install process.
However it is encouraged that users log in the VM and start the SSL setup proces.&lt;/p&gt;

    &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;VM login credentials:
username: passbolt
password: admin
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;

    &lt;h2 id=&quot;ssl-setup-process&quot;&gt;SSL setup process:&lt;/h2&gt;

    &lt;p&gt;Passbolt Pro provides a set of ssl scripts to easily setup SSL. This scripts are located in:&lt;/p&gt;
    &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;/home/passbolt/passbolt_ssl_setup/passbolt_pro_debian_ssl_installer.sh
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;

    &lt;p&gt;Executing the following command the script will guide you through the SSL setup:&lt;/p&gt;
    &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;sudo&lt;/span&gt; /home/passbolt/passbolt_ssl_setup/passbolt_pro_debian_ssl_installer.sh
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;

    &lt;div class=&quot;last-updated&quot;&gt;
      &lt;h3&gt;Last updated&lt;/h3&gt;
      &lt;p&gt;This article was last updated on 
April
10th,
2018.&lt;/p&gt;
    &lt;/div&gt;

  &lt;/div&gt;
  &lt;div class=&quot;col4 last push1&quot;&gt;

    &lt;div class=&quot;message tldr notice&quot;&gt;
    &lt;p&gt;Are you experiencing issues with Passbolt Pro?&lt;/p&gt;
    &lt;a href=&quot;mailto:contact@passbolt.com&quot; class=&quot;button primary&quot;&gt;Contact Pro support&lt;/a&gt;
    &lt;p&gt;or &lt;a href=&quot;https://community.passbolt.com&quot;&gt;ask the community&lt;/a&gt;&lt;/p&gt;

&lt;/div&gt;

  &lt;/div&gt;
&lt;/div&gt;</content><author><name></name></author><summary type="html"></summary></entry><entry><title type="html">Docker install</title><link href="https://help.passbolt.com/hosting/install/pro/docker.html" rel="alternate" type="text/html" title="Docker install" /><published>2018-04-09T02:00:00+02:00</published><updated>2018-04-09T02:00:00+02:00</updated><id>https://help.passbolt.com/hosting/install/pro/docker</id><content type="html" xml:base="https://help.passbolt.com/hosting/install/pro/docker.html">&lt;div class=&quot;row&quot;&gt;
  &lt;div class=&quot;col7&quot;&gt;

    &lt;h2 id=&quot;system-requirements&quot;&gt;System requirements&lt;/h2&gt;

    &lt;ul&gt;
      &lt;li&gt;Docker CE&lt;/li&gt;
    &lt;/ul&gt;

    &lt;h2 id=&quot;optional-system-requirements&quot;&gt;Optional system requirements&lt;/h2&gt;

    &lt;ul&gt;
      &lt;li&gt;MySQL &amp;gt;= 5.0 if you plan not to host mysql on a docker container.&lt;/li&gt;
      &lt;li&gt;docker-compose if you plan to use a docker-compose.yml file to run passbolt container.&lt;/li&gt;
      &lt;li&gt;rng-tools/haveged for faster filling of container entropy pool. These tools come handy in cases where GnuPG complains about no entropy is available to perform some operation (generate keys, encrypt, sign…) inside the docker container. &lt;a href=&quot;https://security.stackexchange.com/questions/39992/is-it-safe-to-use-rng-tools-on-a-virtual-machine&quot;&gt;Important considerations&lt;/a&gt;&lt;/li&gt;
    &lt;/ul&gt;

    &lt;h2 id=&quot;getting-passbolt-container&quot;&gt;Getting passbolt container&lt;/h2&gt;

    &lt;p&gt;Passbolt containers follow the following tagging:&lt;/p&gt;

    &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&amp;lt;version_number&amp;gt;-&amp;lt;build_number&amp;gt;-pro-debian
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;

    &lt;p&gt;Nobody is perfect so we also provide a  &lt;em&gt;latest&lt;/em&gt; tag for Passbolt containers. Through all this documentation pages we make use of the latest tag so users will get the last version of passbolt.
However, it is recommended that users pull the tags pointing to specific passbolt versions when running in environments other than testing.&lt;/p&gt;

    &lt;p&gt;Get passbolt Pro latest docker container:&lt;/p&gt;
    &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;docker pull passbolt/passbolt:latest-pro
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;

    &lt;h2 id=&quot;using-passbolt-container&quot;&gt;Using passbolt container&lt;/h2&gt;

    &lt;p&gt;Passbolt requires a database backend to store the information. In this section we will be using a MySQL database packaged as a docker container.&lt;/p&gt;

    &lt;p&gt;A subscription key file is also required to use Passbolt Pro. You can get the subscription key &lt;a href=&quot;https://www.passbolt.com/&quot;&gt;here&lt;/a&gt;&lt;/p&gt;

    &lt;h3 id=&quot;manually-run-passbolt-container-and-mysql-container&quot;&gt;Manually run passbolt container and mysql container&lt;/h3&gt;

    &lt;p&gt;It is recommended to create a user defined network to ease the container name resolution. Using a user defined network will provide a method to access containers using their names instead ip addresses:&lt;/p&gt;
    &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;docker network create passbolt_network
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;

    &lt;p&gt;First run the mysql container:&lt;/p&gt;
    &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;docker run &lt;span class=&quot;nt&quot;&gt;-d&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;--name&lt;/span&gt; mysql &lt;span class=&quot;nt&quot;&gt;--net&lt;/span&gt; passbolt_network &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
             &lt;span class=&quot;nt&quot;&gt;-e&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;MYSQL_ROOT_PASSWORD&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&amp;lt;root_password&amp;gt; &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
             &lt;span class=&quot;nt&quot;&gt;-e&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;MYSQL_DATABASE&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&amp;lt;mysql_database&amp;gt; &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
             &lt;span class=&quot;nt&quot;&gt;-e&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;MYSQL_USER&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&amp;lt;mysql_user&amp;gt; &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
             &lt;span class=&quot;nt&quot;&gt;-e&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;MYSQL_PASSWORD&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&amp;lt;mysql_password&amp;gt; &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
             mysql
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;

    &lt;p&gt;Now we can run the passbolt container:&lt;/p&gt;
    &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;docker run &lt;span class=&quot;nt&quot;&gt;--name&lt;/span&gt; passbolt-pro &lt;span class=&quot;nt&quot;&gt;--net&lt;/span&gt; passbolt_network &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
             &lt;span class=&quot;nt&quot;&gt;--mount&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;type&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;bind&lt;/span&gt;,&lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
               &lt;span class=&quot;nb&quot;&gt;source&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&amp;lt;path_subscription&amp;gt;,&lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
               &lt;span class=&quot;nv&quot;&gt;target&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;/var/www/passbolt/config/license &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
             &lt;span class=&quot;nt&quot;&gt;-e&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;DATASOURCES_DEFAULT_HOST&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;mysql &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
             &lt;span class=&quot;nt&quot;&gt;-e&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;DATASOURCES_DEFAULT_PASSWORD&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&amp;lt;mysql_password&amp;gt; &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
             &lt;span class=&quot;nt&quot;&gt;-e&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;DATASOURCES_DEFAULT_USERNAME&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&amp;lt;mysql_user&amp;gt; &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
             &lt;span class=&quot;nt&quot;&gt;-e&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;DATASOURCES_DEFAULT_DATABASE&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&amp;lt;mysql_database&amp;gt; &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
             &lt;span class=&quot;nt&quot;&gt;-e&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;APP_FULL_BASE_URL&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;https://mydomain.com &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
             passbolt/passbolt:latest-pro
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;

    &lt;p&gt;Note: strings between ‘&amp;lt;’ and ‘&amp;gt;’ are variables that the users should fill with their data.&lt;/p&gt;

    &lt;h3 id=&quot;manually-creating-first-admin-user&quot;&gt;Manually creating first admin user&lt;/h3&gt;

    &lt;p&gt;Once the passbolt container is up and running use this command to generate the first admin user:&lt;/p&gt;
    &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;docker &lt;span class=&quot;nb&quot;&gt;exec &lt;/span&gt;passbolt-pro su &lt;span class=&quot;nt&quot;&gt;-m&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-c&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;/var/www/passbolt/bin/cake &lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;
                                passbolt register_user &lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;
                                -u &amp;lt;your@email.com&amp;gt; &lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;
                                -f &amp;lt;yourname&amp;gt; &lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;
                                -l &amp;lt;surname&amp;gt; &lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;
                                -r admin&quot;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-s&lt;/span&gt; /bin/sh www-data
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;

    &lt;p&gt;It will output a link similar to the below one that can be pasted on the browser to finalize user registration:&lt;/p&gt;
    &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;https://mydomain.com/setup/install/1eafab88-a17d-4ad8-97af-77a97f5ff552/f097be64-3703-41e2-8ea2-d59cbe1c15bc
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;

    &lt;h3 id=&quot;using-docker-compose&quot;&gt;Using docker-compose&lt;/h3&gt;

    &lt;p&gt;From the docker-compose official docs: ‘Compose is a tool for defining and running multi-container Docker applications’&lt;/p&gt;

    &lt;p&gt;Passbolt provides a &lt;a href=&quot;https://github.com/passbolt/passbolt_docker/blob/master/docker-compose-pro.yml&quot;&gt;docker-compose-pro.yml&lt;/a&gt; file. That users can download and use with docker-compose.
The easiest way to use passbolt provided docker-compose-pro.yml is to:&lt;/p&gt;
    &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;git clone https://github.com/passbolt/passbolt_docker
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;cp &lt;/span&gt;your_subscription_license_file passbolt_docker/license
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;cd &lt;/span&gt;passbolt_docker
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;

    &lt;p&gt;At this point some users might want to customize passbolt environment variables and change the fullBaseUrl for instance. Environment variables are defined in the following files:&lt;/p&gt;
    &lt;ul&gt;
      &lt;li&gt;env/mysql.env&lt;/li&gt;
      &lt;li&gt;env/passbolt.env&lt;/li&gt;
    &lt;/ul&gt;

    &lt;p&gt;Once the files fit your needs it is time to:&lt;/p&gt;
    &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;docker-compose &lt;span class=&quot;nt&quot;&gt;-f&lt;/span&gt; docker-compose-pro.yml up
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;

    &lt;h3 id=&quot;create-first-admin-user-using-docker-compose&quot;&gt;Create first admin user using docker-compose&lt;/h3&gt;

    &lt;p&gt;If you run passbolt using &lt;a href=&quot;https://github.com/passbolt/passbolt_docker/blob/master/docker-compose-pro.yml&quot;&gt;docker-compose-pro.yml&lt;/a&gt; provided by passbolt:&lt;/p&gt;

    &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;docker-compose &lt;span class=&quot;nb&quot;&gt;exec &lt;/span&gt;passbolt su &lt;span class=&quot;nt&quot;&gt;-m&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-c&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;/var/www/passbolt/bin/cake &lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;
                                passbolt register_user &lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;
                                -u &amp;lt;your@email.com&amp;gt; &lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;
                                -f &amp;lt;yourname&amp;gt; &lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;
                                -l &amp;lt;surname&amp;gt; &lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;
                                -r admin&quot;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-s&lt;/span&gt; /bin/sh www-data
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;

    &lt;h2 id=&quot;persisting-data-in-passbolt-container&quot;&gt;Persisting data in passbolt container&lt;/h2&gt;

    &lt;p&gt;There are several locations that might be interesting for the users to persist data between container restarts:&lt;/p&gt;
    &lt;ul&gt;
      &lt;li&gt;Images directory: /var/www/passbolt/webroot/img&lt;/li&gt;
      &lt;li&gt;Gnupg serverkeys directory: /var/www/passbolt/config/gpg&lt;/li&gt;
      &lt;li&gt;
        &lt;p&gt;SSL certificate files: /etc/ssl/certs/certiticate.crt /etc/ssl/certs/certificate.key&lt;/p&gt;
      &lt;/li&gt;
      &lt;li&gt;Subscription key file: /var/www/passbolt/config/license&lt;/li&gt;
    &lt;/ul&gt;

    &lt;p&gt;This files and directories can be persisted in the docker volume using &lt;a href=&quot;https://docs.docker.com/storage/volumes/&quot;&gt;docker volumes&lt;/a&gt; or using &lt;a href=&quot;https://docs.docker.com/storage/bind-mounts/#start-a-container-with-a-bind-mount&quot;&gt;bind mounts&lt;/a&gt;&lt;/p&gt;

    &lt;h3 id=&quot;examples&quot;&gt;Examples&lt;/h3&gt;

    &lt;p&gt;An example for persisting the images directory could be to create a docker volume:&lt;/p&gt;
    &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;docker volume create passbolt_images
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;

    &lt;p&gt;And run passbolt container with the previously created volume:&lt;/p&gt;
    &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;docker run &lt;span class=&quot;nt&quot;&gt;--name&lt;/span&gt; passbolt-pro &lt;span class=&quot;nt&quot;&gt;--net&lt;/span&gt; passbolt_network &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
             &lt;span class=&quot;nt&quot;&gt;--mount&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;source&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;passbolt_images,&lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
             &lt;span class=&quot;nv&quot;&gt;target&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;/var/www/passbolt/webroot/img &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
             &lt;span class=&quot;nt&quot;&gt;--mount&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;type&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;bind&lt;/span&gt;,&lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
               &lt;span class=&quot;nb&quot;&gt;source&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&amp;lt;path_subscription&amp;gt;,&lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
               &lt;span class=&quot;nv&quot;&gt;target&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;/var/www/passbolt/config/license &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
             &lt;span class=&quot;nt&quot;&gt;-e&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;DATASOURCES_DEFAULT_HOST&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;mysql &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
             &lt;span class=&quot;nt&quot;&gt;-e&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;DATASOURCES_DEFAULT_PASSWORD&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&amp;lt;mysql_password&amp;gt; &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
             &lt;span class=&quot;nt&quot;&gt;-e&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;DATASOURCES_DEFAULT_USERNAME&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&amp;lt;mysql_user&amp;gt; &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
             &lt;span class=&quot;nt&quot;&gt;-e&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;DATASOURCES_DEFAULT_DATABASE&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&amp;lt;mysql_database&amp;gt; &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
             &lt;span class=&quot;nt&quot;&gt;-e&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;APP_FULL_BASE_URL&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;https://mydomain.com &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
             passbolt/passbolt:latest-pro
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;

    &lt;p&gt;Bind volumes are usually useful when, for instance, the SSL certificates or GnuPG keys have been already created in the host machine:&lt;/p&gt;
    &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;docker run &lt;span class=&quot;nt&quot;&gt;--name&lt;/span&gt; passbolt &lt;span class=&quot;nt&quot;&gt;--net&lt;/span&gt; passbolt_network &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
             &lt;span class=&quot;nt&quot;&gt;--mount&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;type&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;bind&lt;/span&gt;,&lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
               &lt;span class=&quot;nb&quot;&gt;source&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&amp;lt;host_path_to_gnupg_keys_dir&amp;gt;,&lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
               &lt;span class=&quot;nv&quot;&gt;target&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;/var/www/passbolt/config/gpg &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
             &lt;span class=&quot;nt&quot;&gt;--mount&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;type&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;bind&lt;/span&gt;,&lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
               &lt;span class=&quot;nb&quot;&gt;source&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&amp;lt;path_subscription&amp;gt;,&lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
               &lt;span class=&quot;nv&quot;&gt;target&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;/var/www/passbolt/config/license &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
             &lt;span class=&quot;nt&quot;&gt;-e&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;DATASOURCES_DEFAULT_HOST&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;mysql &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
             &lt;span class=&quot;nt&quot;&gt;-e&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;DATASOURCES_DEFAULT_PASSWORD&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&amp;lt;mysql_password&amp;gt; &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
             &lt;span class=&quot;nt&quot;&gt;-e&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;DATASOURCES_DEFAULT_USERNAME&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&amp;lt;mysql_user&amp;gt; &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
             &lt;span class=&quot;nt&quot;&gt;-e&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;DATASOURCES_DEFAULT_DATABASE&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&amp;lt;mysql_database&amp;gt; &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
             &lt;span class=&quot;nt&quot;&gt;-e&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;APP_FULL_BASE_URL&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;https://mydomain.com &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
             passbolt/passbolt:latest-pro
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;

    &lt;p&gt;An example of the above using docker-compose can be found &lt;a href=&quot;https://github.com/passbolt/passbolt_docker/blob/master/docker-compose-pro.yml&quot;&gt;here&lt;/a&gt; where bind mounts and volumes are used.&lt;/p&gt;

    &lt;p&gt;NOTE: If you dont provide any GnuPG severkey or SSL certificate passbolt container will create a self signed SSL certificate and a GnuPG server key pair.&lt;/p&gt;

    &lt;div class=&quot;last-updated&quot;&gt;
      &lt;h3&gt;Last updated&lt;/h3&gt;
      &lt;p&gt;This article was last updated on 
April
9th,
2018.&lt;/p&gt;
    &lt;/div&gt;

  &lt;/div&gt;
  &lt;div class=&quot;col4 last push1&quot;&gt;

    &lt;div class=&quot;message tldr notice&quot;&gt;
    &lt;p&gt;Are you experiencing issues with Passbolt Pro?&lt;/p&gt;
    &lt;a href=&quot;mailto:contact@passbolt.com&quot; class=&quot;button primary&quot;&gt;Contact Pro support&lt;/a&gt;
    &lt;p&gt;or &lt;a href=&quot;https://community.passbolt.com&quot;&gt;ask the community&lt;/a&gt;&lt;/p&gt;

&lt;/div&gt;

  &lt;/div&gt;
&lt;/div&gt;</content><author><name></name></author><summary type="html"></summary></entry><entry><title type="html">Upgrade Passbolt from v1 to Pro on a new server</title><link href="https://help.passbolt.com/hosting/upgrade/pro/upgrade-pro-from-ce-v1-new-server.html" rel="alternate" type="text/html" title="Upgrade Passbolt from v1 to Pro on a new server" /><published>2018-04-09T02:00:00+02:00</published><updated>2018-04-09T02:00:00+02:00</updated><id>https://help.passbolt.com/hosting/upgrade/pro/upgrade-pro-from-ce-v1-new-server</id><content type="html" xml:base="https://help.passbolt.com/hosting/upgrade/pro/upgrade-pro-from-ce-v1-new-server.html">&lt;div class=&quot;row&quot;&gt;
  &lt;div class=&quot;col7&quot;&gt;

    &lt;p&gt;This tutorial will be available soon.&lt;/p&gt;

    &lt;div class=&quot;last-updated&quot;&gt;
      &lt;h3&gt;Last updated&lt;/h3&gt;
      &lt;p&gt;This article was last updated on 
April
9th,
2018.&lt;/p&gt;
    &lt;/div&gt;

  &lt;/div&gt;
  &lt;div class=&quot;col4 last push1&quot;&gt;

    &lt;div class=&quot;message tldr notice&quot;&gt;
    &lt;p&gt;Are you experiencing issues with Passbolt Pro?&lt;/p&gt;
    &lt;a href=&quot;mailto:contact@passbolt.com&quot; class=&quot;button primary&quot;&gt;Contact Pro support&lt;/a&gt;
    &lt;p&gt;or &lt;a href=&quot;https://community.passbolt.com&quot;&gt;ask the community&lt;/a&gt;&lt;/p&gt;

&lt;/div&gt;

  &lt;/div&gt;
&lt;/div&gt;</content><author><name></name></author><summary type="html"></summary></entry><entry><title type="html">Upgrade Passbolt from v1 to Pro on the same server</title><link href="https://help.passbolt.com/hosting/upgrade/pro/upgrade-pro-from-ce-v1-same-server.html" rel="alternate" type="text/html" title="Upgrade Passbolt from v1 to Pro on the same server" /><published>2018-04-09T02:00:00+02:00</published><updated>2018-04-09T02:00:00+02:00</updated><id>https://help.passbolt.com/hosting/upgrade/pro/upgrade-pro-from-ce-v1-same-server</id><content type="html" xml:base="https://help.passbolt.com/hosting/upgrade/pro/upgrade-pro-from-ce-v1-same-server.html">&lt;div class=&quot;row&quot;&gt;
  &lt;div class=&quot;col7&quot;&gt;

    &lt;p&gt;This tutorial covers the case where you want to upgrade your current instance of passbolt CE v1.x into Passbolt Pro on the same server.&lt;/p&gt;

    &lt;p&gt;If you want to use a new server, &lt;a href=&quot;/hosting/upgrade/pro/upgrade-ce-v1-to-pro-new-server&quot;&gt;follow this link&lt;/a&gt;.&lt;/p&gt;

    &lt;div class=&quot;message warning&quot;&gt;
    &lt;p&gt;
        &lt;strong&gt;Important:&lt;/strong&gt; Please take a full &lt;a href=&quot;/hosting/backup-v1&quot;&gt;backup&lt;/a&gt; of your Passbolt CE before proceeding with the upgrade. Backup should include passbolt files as well as the database.
    &lt;/p&gt;
    
&lt;/div&gt;

    &lt;h2 id=&quot;system-requirements&quot;&gt;System requirements&lt;/h2&gt;
    &lt;p&gt;Passbolt is reported to work on a large variety of operating system configurations. 
Therefore this help page is a generic guide that should work for most environments.&lt;/p&gt;

    &lt;p&gt;If you run into any issues with your particular configuration, 
&lt;a href=&quot;https://community.passbolt.com/c/installation-issues&quot;&gt;please check the forum&lt;/a&gt;. 
Maybe someone else has had your issue. If not, make a post and the community will try to help you.&lt;/p&gt;

    &lt;ul&gt;
      &lt;li&gt;Any Unix-like major distribution (Debian, Centos, Ubuntu, *BSD)&lt;/li&gt;
      &lt;li&gt;A webserver (Apache or Nginx)&lt;/li&gt;
      &lt;li&gt;A TLS server certificate for HTTPS&lt;/li&gt;
      &lt;li&gt;PHP &amp;gt;= 7.0.0&lt;/li&gt;
      &lt;li&gt;Mysql &amp;gt;= 5.5.59&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;https://getcomposer.org/download/&quot;&gt;Composer&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;https://gnupg.org/&quot;&gt;GnuPG&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;https://git-scm.com/&quot;&gt;Git&lt;/a&gt;&lt;/li&gt;
    &lt;/ul&gt;

    &lt;p&gt;The following PHP extensions (that may or may not come by default):&lt;/p&gt;
    &lt;ul&gt;
      &lt;li&gt;&lt;a href=&quot;http://php.net/manual/en/gnupg.installation.php&quot;&gt;PHP-GNUPG&lt;/a&gt;: for key verification and authentication.&lt;/li&gt;
      &lt;li&gt;Cakephp default requirements: Intl, mbstring, simplexml&lt;/li&gt;
      &lt;li&gt;Image manipulation: gd or imagick&lt;/li&gt;
      &lt;li&gt;Database: Mysqlnd, pdo, pdo_mysql&lt;/li&gt;
      &lt;li&gt;Some general default: xsl, phar, posix, xml, zlib, ctype, curl, json.&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;https://secure.php.net/manual/en/ldap.installation.php&quot;&gt;Ldap&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&amp;amp; more depending on your configuration (for example if you want to use memcache for sessions).&lt;/li&gt;
    &lt;/ul&gt;

    &lt;h2 id=&quot;upgrade-to-passbolt-pro&quot;&gt;Upgrade to Passbolt Pro&lt;/h2&gt;
    &lt;p&gt;In the following examples we assume you are running passbolt CE v1 using apache in the &lt;code class=&quot;highlighter-rouge&quot;&gt;/var/www/passbolt&lt;/code&gt;
directory. You will need to replace these values with your local environment settings.&lt;/p&gt;

    &lt;h3 id=&quot;make-sure-you-have-the-latest-v1x-version&quot;&gt;1. Make sure you have the latest v1.x version&lt;/h3&gt;
    &lt;p&gt;If you do not have the latest version, please follow the regular &lt;a href=&quot;/hosting/update-v1&quot;&gt;v1 udpate process&lt;/a&gt;.
We’ll also assume you have a web server that match the system requirements.&lt;/p&gt;

    &lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;/var/www/passbolt&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;cat &lt;/span&gt;app/Config/version.php  | &lt;span class=&quot;nb&quot;&gt;grep &lt;/span&gt;number
&lt;span class=&quot;s1&quot;&gt;'number'&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'1.6.10'&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;

    &lt;h3 id=&quot;take-your-site-offline&quot;&gt;2. Take your site offline&lt;/h3&gt;
    &lt;p&gt;There are multiple ways of doing that, the simplest is sending a notice by email to your users
and stopping your webserver. The better approach would be to create a temporary html file and
redirect your passbolt user there, for example:&lt;/p&gt;

    &lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;/var/www&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;mkdir &lt;/span&gt;wip
/var/www&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;touch &lt;/span&gt;wip/index.html
/var/www&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'&amp;lt;html&amp;gt;&amp;lt;head&amp;gt;&amp;lt;title&amp;gt;Maintenance in progress&amp;lt;/title&amp;gt;&amp;lt;/head&amp;gt;&amp;lt;body&amp;gt;&amp;lt;h1&amp;gt;Maintenance in progress&amp;lt;/h1&amp;gt;&amp;lt;/body&amp;gt;&amp;lt;/html&amp;gt;'&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&lt;/span&gt; wip/index.html
/var/www&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;nano /etc/apache2/sites-enabled/001-default.conf

&amp;lt;IfModule mod_ssl.c&amp;gt;
        &amp;lt;VirtualHost _default_:443&amp;gt;
                ServerAdmin webmaster@localhost
                ServerName www.passbolt.test
                DocumentRoot /var/www/wip

                ErrorLog &lt;span class=&quot;k&quot;&gt;${&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;APACHE_LOG_DIR&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;}&lt;/span&gt;/error.log
                CustomLog &lt;span class=&quot;k&quot;&gt;${&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;APACHE_LOG_DIR&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;}&lt;/span&gt;/access.log combined

                SSLEngine on
                SSLCertificateFile /etc/apache2/ssl/passbolt.crt
                SSLCertificateKeyFile /etc/apache2/ssl/passbolt.key

        &amp;lt;Directory /var/www/wip&amp;gt;
            Options FollowSymLinks
            AllowOverride All
            Require all granted
        &amp;lt;/Directory&amp;gt;

        &amp;lt;/VirtualHost&amp;gt;
&amp;lt;/IfModule&amp;gt;
/var/www&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;service apache2 restart
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;

    &lt;h3 id=&quot;download-passbolt-pro&quot;&gt;3. Download Passbolt Pro&lt;/h3&gt;
    &lt;p&gt;Open a shell with the same user as your web server user. (usually, www-data for apache, nginx for nginx)&lt;/p&gt;

    &lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;/var/www&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;su &lt;span class=&quot;nt&quot;&gt;-s&lt;/span&gt; /bin/bash www-data
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;

    &lt;p&gt;Replace the previous passbolt by the new version.&lt;/p&gt;

    &lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;/var/www&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;mv&lt;/span&gt; ./passbolt ./passbolt_old
/var/www&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;git clone https://bitbucket.org/passbolt_pro/passbolt_pro_api.git ./passbolt
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;

    &lt;h3 id=&quot;install-the-dependencies&quot;&gt;4. Install the dependencies&lt;/h3&gt;
    &lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;/var/www&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;cd&lt;/span&gt; ./passbolt
/var/www/passbolt&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;composer &lt;span class=&quot;nb&quot;&gt;install&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;--no-dev&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;

    &lt;h3 id=&quot;copy-the-avatar-folder&quot;&gt;5. Copy the avatar folder&lt;/h3&gt;
    &lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;/var/www/passbolt&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;cp&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-R&lt;/span&gt; ../passbolt_old/app/webroot/img/public/&lt;span class=&quot;k&quot;&gt;*&lt;/span&gt; ./webroot/img/public/.
/var/www/passbolt&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;mv&lt;/span&gt; ./webroot/img/public/images/ProfileAvatar ./webroot/img/public/images/Avatar
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;

    &lt;h3 id=&quot;configure-passbolt-pro&quot;&gt;6. Configure Passbolt Pro&lt;/h3&gt;
    &lt;p&gt;To configure Passbolt Pro, the easiest way is to use the in-built configuration wizard.
Just point your browser to your passbolt url.&lt;/p&gt;

    &lt;p&gt;You will be greeted by a welcome screen. Click on the Configure with wizard option and follow the instructions.&lt;/p&gt;

    &lt;figure&gt;
    &lt;img src=&quot;https://help.passbolt.com/assets/img/help/2018/04/passbolt-welcome-page.png&quot; alt=&quot;passbolt welcome page before configuration&quot; style=&quot;max-width:586px;&quot; /&gt;
    &lt;span class=&quot;legend&quot;&gt;fig. passbolt welcome page before configuration&lt;/span&gt;
&lt;/figure&gt;

    &lt;div class=&quot;message warning&quot;&gt;
    &lt;p&gt;
        &lt;strong&gt;Note:&lt;/strong&gt; Enter the same configuration details as the the ones that were used for your Passbolt CE.
    This includes your database, smtp details, as well as your server GPG key that you’ll need to import (&lt;strong&gt;Do not generate a new one&lt;/strong&gt;).
    &lt;/p&gt;
    
&lt;/div&gt;

    &lt;figure&gt;
    &lt;img src=&quot;https://help.passbolt.com/assets/img/help/2018/04/wizard-key-import.png&quot; alt=&quot;Wizard - import key screen&quot; style=&quot;max-width:586px;&quot; /&gt;
    &lt;span class=&quot;legend&quot;&gt;fig. Wizard - import key screen&lt;/span&gt;
&lt;/figure&gt;

    &lt;h3 id=&quot;your-server-is-now-ready-to-run-passbolt&quot;&gt;7. Your server is now ready to run passbolt&lt;/h3&gt;

    &lt;p&gt;Once you have followed all the steps of the wizard, Passbolt Pro is ready to run. You will be redirected
automatically to the login page where you can log in.&lt;/p&gt;

    &lt;h3 id=&quot;final-step-modify-the-cron-job-to-send-emails&quot;&gt;8. Final step: modify the cron job to send emails&lt;/h3&gt;

    &lt;p&gt;Modify the cronjob entry you had added for passbolt CE v1 :&lt;/p&gt;
    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;* * * * * /var/www/passbolt/app/Console/cake EmailQueue.sender &amp;gt; /var/log/passbolt.log
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;

    &lt;p&gt;into this one:&lt;/p&gt;
    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;* * * * * /var/www/passbolt/bin/cake EmailQueue.sender &amp;gt; /var/log/passbolt.log
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;

    &lt;h2 id=&quot;thats-it&quot;&gt;That’s it!&lt;/h2&gt;

    &lt;p&gt;At this stage, Passbolt Pro should be working perfectly.&lt;/p&gt;

    &lt;p&gt;Any issue? Do contact us on the &lt;a href=&quot;mailto:contact@passbolt.com&quot;&gt;Passbolt Pro support&lt;/a&gt; with the email provided during your purchase.&lt;/p&gt;

    &lt;div class=&quot;last-updated&quot;&gt;
      &lt;h3&gt;Last updated&lt;/h3&gt;
      &lt;p&gt;This article was last updated on 
April
9th,
2018.&lt;/p&gt;
    &lt;/div&gt;

  &lt;/div&gt;
  &lt;div class=&quot;col4 last push1&quot;&gt;

    &lt;div class=&quot;message tldr notice&quot;&gt;
    &lt;p&gt;Are you experiencing issues with Passbolt Pro?&lt;/p&gt;
    &lt;a href=&quot;mailto:contact@passbolt.com&quot; class=&quot;button primary&quot;&gt;Contact Pro support&lt;/a&gt;
    &lt;p&gt;or &lt;a href=&quot;https://community.passbolt.com&quot;&gt;ask the community&lt;/a&gt;&lt;/p&gt;

&lt;/div&gt;

  &lt;/div&gt;
&lt;/div&gt;</content><author><name></name></author><summary type="html"></summary></entry><entry><title type="html">Upgrade from CE v1 to Pro using docker</title><link href="https://help.passbolt.com/hosting/upgrade/pro/upgrade-pro-from-ce-v1-docker.html" rel="alternate" type="text/html" title="Upgrade from CE v1 to Pro using docker" /><published>2018-04-09T02:00:00+02:00</published><updated>2018-04-09T02:00:00+02:00</updated><id>https://help.passbolt.com/hosting/upgrade/pro/upgrade-pro-from-ce-v1-docker</id><content type="html" xml:base="https://help.passbolt.com/hosting/upgrade/pro/upgrade-pro-from-ce-v1-docker.html">&lt;div class=&quot;row&quot;&gt;
  &lt;div class=&quot;col7&quot;&gt;

    &lt;p&gt;This tutorial covers the case where you want to upgrade from your passbolt CE v1.x into Passbolt Pro when using docker.&lt;/p&gt;

    &lt;div class=&quot;message warning&quot;&gt;
    &lt;p&gt;
        &lt;strong&gt;Important:&lt;/strong&gt; Please take a full &lt;a href=&quot;/hosting/backup-v1&quot;&gt;backup&lt;/a&gt; of your passbolt before proceeding with the upgrade. Backup should include passbolt files as well as the database.
    &lt;/p&gt;
    
&lt;/div&gt;

    &lt;p&gt;The upgrading process is very similar to the one listed in the &lt;a href=&quot;/hosting/upgrade/ce/upgrade-docker-ce.html&quot;&gt;ce section&lt;/a&gt;. The main difference is that Passbolt Pro requires a subscription key to
work.&lt;/p&gt;

    &lt;h2 id=&quot;upgrade-from-v1610-debian&quot;&gt;Upgrade from v1.6.10-debian&lt;/h2&gt;

    &lt;p&gt;Passbolt v2 introduces several changes that are important to keep in mind when upgrading:&lt;/p&gt;

    &lt;h4 id=&quot;changes-environment-variables&quot;&gt;Changes: Environment variables&lt;/h4&gt;

    &lt;p&gt;The set of environment variables have changed and users should take some time to get familiar with the new ones. For example in case of the database env variables:&lt;/p&gt;

    &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;DB_USER is now DATASOURCES_DEFAULT_USERNAME
DB_HOST is now DATASOURCES_DEFAULT_HOST
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
    &lt;p&gt;There is a more detailed list in passbolt_docker &lt;a href=&quot;https://github.com/passbolt/passbolt_docker/blob/master/README.md&quot;&gt;README&lt;/a&gt; file.&lt;/p&gt;

    &lt;h4 id=&quot;changes-configuration-files&quot;&gt;Changes: Configuration files&lt;/h4&gt;

    &lt;p&gt;No more core.php, email.php or database.php.
Any user that does not want to use environment variables must configure passbolt using:&lt;/p&gt;
    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;/var/www/passbolt/config/passbolt.php
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
    &lt;p&gt;Passbolt will look for for configuration values in &lt;code class=&quot;highlighter-rouge&quot;&gt;passbolt.php&lt;/code&gt;. Wether &lt;code class=&quot;highlighter-rouge&quot;&gt;passbolt.php&lt;/code&gt; does not exist or the configuration section is not defined on it, passbolt will then look for configuration details in default.php which relies on environment variables/default values.
Gpg config directory has changed slightly its path from:&lt;/p&gt;

    &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;/var/www/passbolt/app/Config/gpg/ to /var/www/passbolt/config/gpg
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;

    &lt;p&gt;Gpg default server key file names also changed:&lt;/p&gt;

    &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;serverkey.private.asc to serverkey_private.asc
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;

    &lt;h4 id=&quot;changes-www-user&quot;&gt;Changes: www user&lt;/h4&gt;

    &lt;p&gt;Passbolt container is now running under the www-data user&lt;/p&gt;

    &lt;h4 id=&quot;changes-images-directory&quot;&gt;Changes: images directory&lt;/h4&gt;

    &lt;p&gt;Path to the images directory is different:&lt;/p&gt;

    &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;/var/www/passbolt/app/webroot/img/public/images to /var/www/passbolt/webroot/img/public/images
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;

    &lt;p&gt;Users must also rename ProfileAvatar to Avatar directory inside public/images in order to see images in passbolt v2&lt;/p&gt;

    &lt;h4 id=&quot;changes-supervisor&quot;&gt;Changes: supervisor&lt;/h4&gt;

    &lt;p&gt;In order to manage the running process in passbolt container we introduced supervisord. Users are now able to restart passbolt container processes using:&lt;/p&gt;

    &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;docker &lt;span class=&quot;nb&quot;&gt;exec &lt;/span&gt;passbolt supervisorctl restart &amp;lt;php-fpm|nginx|cron&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;

    &lt;p&gt;Now that we have a better overview of the changes let’s start with the upgrading process!&lt;/p&gt;

    &lt;h3 id=&quot;backup-mysql-database&quot;&gt;Backup mysql database&lt;/h3&gt;

    &lt;p&gt;First of all is encouraged to backup all the relevant data that is:&lt;/p&gt;
    &lt;ul&gt;
      &lt;li&gt;Database&lt;/li&gt;
      &lt;li&gt;Images&lt;/li&gt;
      &lt;li&gt;Server public and private keys&lt;/li&gt;
    &lt;/ul&gt;

    &lt;p&gt;You might want to check the detailed &lt;a href=&quot;/hosting/backup-v1&quot;&gt;backup list for v1&lt;/a&gt;&lt;/p&gt;

    &lt;p&gt;There are multiple ways to backup your database following there is an example using the passbolt container:&lt;/p&gt;
    &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;docker &lt;span class=&quot;nb&quot;&gt;exec &lt;/span&gt;passbolt mysqldump &lt;span class=&quot;nt&quot;&gt;-h&lt;/span&gt; &amp;lt;db_host&amp;gt; &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
                                 &lt;span class=&quot;nt&quot;&gt;-u&lt;/span&gt; passbolt &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
                                 &lt;span class=&quot;nt&quot;&gt;-pP4ssb0lt&lt;/span&gt; &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
                                 passbolt &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; dump.sql
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;

    &lt;p&gt;This will output a dump.sql file on the host machine.&lt;/p&gt;

    &lt;h3 id=&quot;backup-images-directory&quot;&gt;Backup images directory&lt;/h3&gt;

    &lt;p&gt;If you are mounting the images directory using a bind mount just copy the host image directory in a safe location.
If you are using docker volumes to persist your images directory, or not persisting the images directory at all, you can execute the following to copy your images to the host machine.&lt;/p&gt;

    &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;docker &lt;span class=&quot;nb&quot;&gt;cp &lt;/span&gt;passbolt:/var/www/app/webroot/img/public public_images_backup
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
    &lt;p&gt;This will output a public_images_directory with the images stored in the passbolt container.&lt;/p&gt;

    &lt;h3 id=&quot;backup-gpg-keys&quot;&gt;Backup gpg keys&lt;/h3&gt;

    &lt;p&gt;As with the previous section you can proceed exactly the same with the gpg keys:&lt;/p&gt;

    &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;docker &lt;span class=&quot;nb&quot;&gt;cp &lt;/span&gt;passbolt:/var/www/app/Config/gpg/ gpg_keys_backup
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;

    &lt;p&gt;This will output a gpg_keys_backup directory with the contents of the gpg configuration folder of passbolt.&lt;/p&gt;

    &lt;h2 id=&quot;getting-passbolt-container&quot;&gt;Getting passbolt container&lt;/h2&gt;

    &lt;p&gt;Passbolt containers follow the following tagging:&lt;/p&gt;

    &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&amp;lt;version_number&amp;gt;-&amp;lt;build_number&amp;gt;-pro-debian
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;

    &lt;p&gt;Nobody is perfect so we also provide a  &lt;em&gt;latest&lt;/em&gt; tag for Passbolt containers. Through all this documentation pages we make use of the latest tag so users will get the last version of passbolt.
However, it is recommended that users pull the tags pointing to specific passbolt versions when running in environments other than testing.&lt;/p&gt;

    &lt;p&gt;Get passbolt Pro latest docker container:&lt;/p&gt;
    &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;docker pull passbolt/passbolt:latest-pro
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;

    &lt;h2 id=&quot;upgrade-using-latest-v1-version-1610&quot;&gt;Upgrade using latest v1 version (1.6.10)&lt;/h2&gt;

    &lt;p&gt;Passbolt Pro v2 will run the database migrations if needed when starting up. Users just need to provide the gpg keys, configuration files/env variables and images.
Following some examples:&lt;/p&gt;

    &lt;h3 id=&quot;using-host-bind-mounts&quot;&gt;Using host bind mounts&lt;/h3&gt;

    &lt;p&gt;Users that use host bind mounts from host machine into docker file must adjust paths of the mounted files:&lt;/p&gt;

    &lt;p&gt;In the following snippet:&lt;/p&gt;
    &lt;ul&gt;
      &lt;li&gt;passbolt_images_dir: path to a host directory that contains passbolt images Avatar directory.&lt;/li&gt;
      &lt;li&gt;gpg_host_dir: path to a host directory that contains serverkey.asc and serverkey_private.asc&lt;/li&gt;
    &lt;/ul&gt;

    &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;docker run &lt;span class=&quot;nt&quot;&gt;--name&lt;/span&gt; passbolt-pro &lt;span class=&quot;nt&quot;&gt;--net&lt;/span&gt; passbolt_network &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
             &lt;span class=&quot;nt&quot;&gt;--mount&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;type&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;bind&lt;/span&gt;, &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
               &lt;span class=&quot;nb&quot;&gt;source&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&amp;lt;passbolt_images_dir&amp;gt;,&lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
               &lt;span class=&quot;nv&quot;&gt;target&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;/var/www/passbolt/webroot/img &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
             &lt;span class=&quot;nt&quot;&gt;--mount&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;type&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;bind&lt;/span&gt;,&lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
               &lt;span class=&quot;nb&quot;&gt;source&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&amp;lt;path_subscription&amp;gt;,&lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
               &lt;span class=&quot;nv&quot;&gt;target&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;/var/www/passbolt/config/license &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
             &lt;span class=&quot;nt&quot;&gt;--mount&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;type&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;bind&lt;/span&gt;, &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
               &lt;span class=&quot;nb&quot;&gt;source&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&amp;lt;gpg_host_dir&amp;gt;, &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
               &lt;span class=&quot;nv&quot;&gt;target&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;/var/www/passbolt/config/gpg &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
             &lt;span class=&quot;nt&quot;&gt;-e&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;DATASOURCES_DEFAULT_HOST&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;mysql &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
             &lt;span class=&quot;nt&quot;&gt;-e&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;DATASOURCES_DEFAULT_PASSWORD&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&amp;lt;mysql_password&amp;gt; &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
             &lt;span class=&quot;nt&quot;&gt;-e&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;DATASOURCES_DEFAULT_USERNAME&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&amp;lt;mysql_user&amp;gt; &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
             &lt;span class=&quot;nt&quot;&gt;-e&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;DATASOURCES_DEFAULT_DATABASE&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&amp;lt;mysql_database&amp;gt; &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
             &lt;span class=&quot;nt&quot;&gt;-e&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;APP_FULL_BASE_URL&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;https://mydomain.com &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
             passbolt/passbolt:latest-pro
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;

    &lt;h3 id=&quot;using-docker-volumes&quot;&gt;Using docker volumes&lt;/h3&gt;

    &lt;p&gt;Users that use docker volumes should adjust their volumes paths.&lt;/p&gt;

    &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;docker run &lt;span class=&quot;nt&quot;&gt;--name&lt;/span&gt; passbolt-pro &lt;span class=&quot;nt&quot;&gt;--net&lt;/span&gt; passbolt_network &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
             &lt;span class=&quot;nt&quot;&gt;--mount&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;source&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&amp;lt;passbolt_images_volume&amp;gt;,&lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
               &lt;span class=&quot;nv&quot;&gt;target&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;/var/www/passbolt/webroot/img &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
             &lt;span class=&quot;nt&quot;&gt;--mount&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;type&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;bind&lt;/span&gt;,&lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
               &lt;span class=&quot;nb&quot;&gt;source&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&amp;lt;path_subscription&amp;gt;,&lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
               &lt;span class=&quot;nv&quot;&gt;target&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;/var/www/passbolt/config/license &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
             &lt;span class=&quot;nt&quot;&gt;--mount&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;source&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&amp;lt;gpg_keys_volume&amp;gt;, &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
               &lt;span class=&quot;nv&quot;&gt;target&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;/var/www/passbolt/config/gpg &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
             &lt;span class=&quot;nt&quot;&gt;-e&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;DATASOURCES_DEFAULT_HOST&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;mysql &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
             &lt;span class=&quot;nt&quot;&gt;-e&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;DATASOURCES_DEFAULT_PASSWORD&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&amp;lt;mysql_password&amp;gt; &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
             &lt;span class=&quot;nt&quot;&gt;-e&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;DATASOURCES_DEFAULT_USERNAME&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&amp;lt;mysql_user&amp;gt; &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
             &lt;span class=&quot;nt&quot;&gt;-e&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;DATASOURCES_DEFAULT_DATABASE&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&amp;lt;mysql_database&amp;gt; &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
             &lt;span class=&quot;nt&quot;&gt;-e&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;APP_FULL_BASE_URL&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;https://mydomain.com &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
             passbolt/passbolt:latest-pro
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;

  &lt;/div&gt;
&lt;/div&gt;</content><author><name></name></author><summary type="html"></summary></entry><entry><title type="html">Upgrade from CE v2 to Pro using docker</title><link href="https://help.passbolt.com/hosting/upgrade/pro/upgrade-pro-from-ce-v2-docker.html" rel="alternate" type="text/html" title="Upgrade from CE v2 to Pro using docker" /><published>2018-04-09T02:00:00+02:00</published><updated>2018-04-09T02:00:00+02:00</updated><id>https://help.passbolt.com/hosting/upgrade/pro/upgrade-pro-from-ce-v2-docker</id><content type="html" xml:base="https://help.passbolt.com/hosting/upgrade/pro/upgrade-pro-from-ce-v2-docker.html">&lt;div class=&quot;row&quot;&gt;
  &lt;div class=&quot;col7&quot;&gt;

    &lt;p&gt;This tutorial covers the case where you want to upgrade from your passbolt CE v2.x into Passbolt Pro when using docker.&lt;/p&gt;

    &lt;div class=&quot;message warning&quot;&gt;
    &lt;p&gt;
        &lt;strong&gt;Important:&lt;/strong&gt; Please take a full &lt;a href=&quot;/hosting/backup-v1&quot;&gt;backup&lt;/a&gt; of your passbolt before proceeding with the upgrade. Backup should include passbolt files as well as the database.
    &lt;/p&gt;
    
&lt;/div&gt;

    &lt;p&gt;In order to upgrade from v2 CE to Pro users just need to download the pro container and mount their corresponding subscription key.&lt;/p&gt;

    &lt;h2 id=&quot;getting-passbolt-container&quot;&gt;Getting passbolt container&lt;/h2&gt;

    &lt;p&gt;Passbolt containers follow the following tagging:&lt;/p&gt;

    &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&amp;lt;version_number&amp;gt;-&amp;lt;build_number&amp;gt;-pro-debian
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;

    &lt;p&gt;Nobody is perfect so we also provide a  &lt;em&gt;latest&lt;/em&gt; tag for Passbolt containers. Through all this documentation pages we make use of the latest tag so users will get the last version of passbolt.
However, it is recommended that users pull the tags pointing to specific passbolt versions when running in environments other than testing.&lt;/p&gt;

    &lt;p&gt;Get passbolt Pro latest docker container:&lt;/p&gt;
    &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;docker pull passbolt/passbolt:latest-pro
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;

    &lt;h3 id=&quot;using-host-bind-mounts&quot;&gt;Using host bind mounts&lt;/h3&gt;

    &lt;p&gt;Users that use host bind mounts from host machine into docker file must adjust paths of the mounted files:&lt;/p&gt;

    &lt;p&gt;In the following snippet:&lt;/p&gt;
    &lt;ul&gt;
      &lt;li&gt;passbolt_images_dir: path to a host directory that contains passbolt images Avatar directory.&lt;/li&gt;
      &lt;li&gt;gpg_host_dir: path to a host directory that contains serverkey.asc and serverkey_private.asc&lt;/li&gt;
    &lt;/ul&gt;

    &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;docker run &lt;span class=&quot;nt&quot;&gt;--name&lt;/span&gt; passbolt-pro &lt;span class=&quot;nt&quot;&gt;--net&lt;/span&gt; passbolt_network &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
             &lt;span class=&quot;nt&quot;&gt;--mount&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;type&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;bind&lt;/span&gt;, &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
               &lt;span class=&quot;nb&quot;&gt;source&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&amp;lt;passbolt_images_dir&amp;gt;,&lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
               &lt;span class=&quot;nv&quot;&gt;target&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;/var/www/passbolt/webroot/img &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
             &lt;span class=&quot;nt&quot;&gt;--mount&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;type&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;bind&lt;/span&gt;,&lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
               &lt;span class=&quot;nb&quot;&gt;source&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&amp;lt;path_subscription&amp;gt;,&lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
               &lt;span class=&quot;nv&quot;&gt;target&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;/var/www/passbolt/config/license &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
             &lt;span class=&quot;nt&quot;&gt;--mount&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;type&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;bind&lt;/span&gt;, &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
               &lt;span class=&quot;nb&quot;&gt;source&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&amp;lt;gpg_host_dir&amp;gt;, &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
               &lt;span class=&quot;nv&quot;&gt;target&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;/var/www/passbolt/config/gpg &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
             &lt;span class=&quot;nt&quot;&gt;-e&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;DATASOURCES_DEFAULT_HOST&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;mysql &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
             &lt;span class=&quot;nt&quot;&gt;-e&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;DATASOURCES_DEFAULT_PASSWORD&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&amp;lt;mysql_password&amp;gt; &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
             &lt;span class=&quot;nt&quot;&gt;-e&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;DATASOURCES_DEFAULT_USERNAME&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&amp;lt;mysql_user&amp;gt; &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
             &lt;span class=&quot;nt&quot;&gt;-e&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;DATASOURCES_DEFAULT_DATABASE&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&amp;lt;mysql_database&amp;gt; &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
             &lt;span class=&quot;nt&quot;&gt;-e&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;APP_FULL_BASE_URL&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;https://mydomain.com &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
             passbolt/passbolt:latest-pro
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;

    &lt;h3 id=&quot;using-docker-volumes&quot;&gt;Using docker volumes&lt;/h3&gt;

    &lt;p&gt;Users that use docker volumes should adjust their volumes paths.&lt;/p&gt;

    &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;docker run &lt;span class=&quot;nt&quot;&gt;--name&lt;/span&gt; passbolt-pro &lt;span class=&quot;nt&quot;&gt;--net&lt;/span&gt; passbolt_network &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
             &lt;span class=&quot;nt&quot;&gt;--mount&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;source&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&amp;lt;passbolt_images_volume&amp;gt;,&lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
               &lt;span class=&quot;nv&quot;&gt;target&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;/var/www/passbolt/webroot/img &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
             &lt;span class=&quot;nt&quot;&gt;--mount&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;type&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;bind&lt;/span&gt;,&lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
               &lt;span class=&quot;nb&quot;&gt;source&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&amp;lt;path_subscription&amp;gt;,&lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
               &lt;span class=&quot;nv&quot;&gt;target&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;/var/www/passbolt/config/license &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
             &lt;span class=&quot;nt&quot;&gt;--mount&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;source&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&amp;lt;gpg_keys_volume&amp;gt;, &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
               &lt;span class=&quot;nv&quot;&gt;target&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;/var/www/passbolt/config/gpg &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
             &lt;span class=&quot;nt&quot;&gt;-e&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;DATASOURCES_DEFAULT_HOST&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;mysql &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
             &lt;span class=&quot;nt&quot;&gt;-e&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;DATASOURCES_DEFAULT_PASSWORD&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&amp;lt;mysql_password&amp;gt; &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
             &lt;span class=&quot;nt&quot;&gt;-e&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;DATASOURCES_DEFAULT_USERNAME&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&amp;lt;mysql_user&amp;gt; &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
             &lt;span class=&quot;nt&quot;&gt;-e&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;DATASOURCES_DEFAULT_DATABASE&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&amp;lt;mysql_database&amp;gt; &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
             &lt;span class=&quot;nt&quot;&gt;-e&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;APP_FULL_BASE_URL&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;https://mydomain.com &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
             passbolt/passbolt:latest-pro
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;</content><author><name></name></author><summary type="html"></summary></entry></feed>