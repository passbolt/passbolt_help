<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Passbolt Help | Install passbolt API version 1</title>
    <!--
             ____                  __          ____
            / __ \____  _____ ____/ /_  ____  / / /_
           / /_/ / __ `/ ___/ ___/ __ \/ __ \/ / __/
          / ____/ /_/ (__  |__  ) /_/ / /_/ / / /_
         /_/    \__,_/____/____/_.___/\____/_/\__/

         Open source password manager for teams
         © 2019 Passbolt SA

     -->
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta property="og:image" content="https://help.passbolt.com/assets/img/background/og_preview.jpg" />
    <meta property="og:title" content="Install passbolt API version 1" />
    <meta property="og:description" content="" />
    <link rel="stylesheet" href="https://help.passbolt.com/assets/css/help.min.css">
    <link rel="stylesheet" href="https://help.passbolt.com/assets/css/highlight.css">
    <link rel="stylesheet" href="https://help.passbolt.com/assets/css/cookie-eu-banner.css">
    <link rel="stylesheet" href="https://help.passbolt.com/assets/css/custom.css">
    <link rel="canonical" href="https://help.passbolt.com/hosting/install-v1">
    <link rel="shortcut icon" type="image/x-icon" href="https://help.passbolt.com/assets/favicon.ico" />
    <link rel="alternate" type="application/rss+xml" title="Passbolt | Help" href="https://help.passbolt.com/feed.xml">
</head>


<body>
    <div id="container" class="help page background">
            <header>
        <div class="header first ">
            <nav class="greedy">
                <div class="top navigation primary">
                    <ul class="links clearfix">
                        <li class="home with-text"><a href="http://www.passbolt.com/"><span>home</span></a></li>
                        <li class="left"><a href="https://www.passbolt.com/services"><span>pricing</span></a></li>
                        <li class="left"><a href="https://www.passbolt.com/roadmap"><span>roadmap</span></a></li>
                        <li class="left"><a href="https://community.passbolt.com/"><span>forum</span></a></li>
                        <li class="left"><a href="https://www.passbolt.com/blog"><span>blog</span></a></li>
                        <li class="left selected"><a href="https://help.passbolt.com/"><span>help</span></a></li>
                        <li class="left"><a href="https://demo.passbolt.com" class="highlighted" target="_blank" rel="noopener"><span>try it!</span></a></li>
                    </ul>
                    <button class="hidden" count="0">more</button>
                    <ul class="hidden-links hidden"></ul>
                </div>
            </nav>
        </div>
    </header>
    <div class="header second">
        <div class="col1">
            <div class="logo no-img">
                <h1><span>Passbolt</span></h1>
            </div>
        </div>
        <div class="col2 search-wrapper">
            <h2 class="visuallyhidden">Help Search</h2>
            <div>
                <form class="search ready" action="/search.html" method="get">
                    <div class="input required">
                        <label for="search-box">Search</label>
                        <input id="search-box" name="query" maxlength="64" placeholder="Help search" class="fuzzy-search" type="search">
                    </div>
                    <button value="search">
                        <i class="fa fa-fw fa-search"></i>
                        <span class="text visuallyhidden">search</span>
                    </button>
                </form>
            </div>
        </div>
        <div class="col3">
            <div class="edit-on-github">
                <a href="https://github.com/passbolt/passbolt_help/edit/master/_posts/hosting/archived/installation/2017-03-20-hosting-install-v1.md" class="button">
                    <i class="fa fa-github-alt fa-fw"></i> Edit on github</a>
            </div>
        </div>
    </div>

        <div class="panel main" aria-label="Content">
            <div class="panel left">
                
                







<div class="navigation-help" role="navigation">
    <ul>
        <li><h2>Hosting</h2></li>
        
        
        <li>
        
            <a href="https://help.passbolt.com/faq/hosting">Hosting FAQ</a>
        </li>
        
        
        <li>
        
            <a href="https://help.passbolt.com/hosting/install">Installation</a>
        </li>
        
        
        <li>
        
            <a href="https://help.passbolt.com/hosting/update">Update</a>
        </li>
        
        
        <li>
        
            <a href="https://help.passbolt.com/hosting/upgrade">Upgrade</a>
        </li>
        
        
        <li>
        
            <a href="https://help.passbolt.com/hosting/backup">Backup</a>
        </li>
        
        
        <li>
        
            <a href="https://community.passbolt.com/c/installation-issues">Installation issues</a>
        </li>
        
    </ul>
</div>











                
            </div>
            <div class="panel middle" data-spy="scroll" data-target=".scrollspy">
                <div class="grid grid-responsive-12">
                    <article>
                        <div class="row" id="introduction">
    <div class="col12">
        <div class="breadcrumbs">
            <ul>
                <li>
                    <div class="main-cell">
                        <a href="https://www.passbolt.com"><span>home</span></a>
                    </div>
                </li>
                <li>
                    <div class="main-cell">
                        <a href="/"><span>help</span></a>
                    </div>
                </li>
                
                <li>
                    <div class="main-cell">
                        <a href="https://help.passbolt.com/hosting"><span>hosting</span></a>
                    </div>
                </li>
                
                
                <li>
                    <div class="main-cell">
                        <a href="https://help.passbolt.com/hosting/install-v1.html"><span>install-v1</span></a>
                    </div>
                </li>
                
            </ul>
        </div>
    </div>
</div>

                        <div class="row" markdown="1">
<div class="col7" markdown="1">
<h1>Install passbolt API version 1</h1>
</div>
</div>

                        <div class="row">
  <div class="col7">

    <p>Passbolt is reported to work on a large variety of operating system configurations. Therefore this help page is a generic guide that should work for most environments.</p>

    <p>If you run into any issues with your particular configuration, <a href="https://community.passbolt.com/c/installation-issues">please check the forum</a>. Maybe someone else has had your issue. If not, make a post and the community will try to help you.</p>

    <h2 id="other-community-guides">Other community guides</h2>

    <p>If you are looking for more system specific step by step guides please check out the following resources:</p>

    <ul>
      <li><a href="https://medium.com/passbolt/passbolt-on-debian-8-71-from-scratch-4438dad18908">Debian 8 “Jessy” with Apache, MariaDB and PHP 5 (by Passbolt)</a></li>
      <li><a href="https://medium.com/passbolt/passbolt-on-centos-7-with-nginx-php7-fpm-mariadb-from-scratch-7b2a9b15f3a4">CentOS 7 with Nginx, MariaDB and PHP7 (by Passbolt)</a></li>
      <li><a href="https://wobak.github.io/Installing%20passbolt%20on%20CentOS%207.html">CentOS 7 with Apache, MariaDB and PHP 7 (by Wobak)</a></li>
      <li><a href="https://www.patpro.net/blog/index.php/2016/09/22/3037-self-hosted-password-manager-installing-passbolt-on-freebsd/">FreeBSD 10.3, Apache, Mysql 5.7, PHP 5.6 (by Patpro)</a></li>
      <li><a href="https://www.authbsd.com/blog/?p=60">OpenBSD 6.1, Nginx, MariaDB, PHP 5.6/7.0 (by AuthBSD)</a></li>
    </ul>

    <h2 id="environment-setup-and-baseline-requirements">Environment setup and baseline requirements</h2>

    <h3 id="operating-system">Operating system</h3>

    <p>We recommend you install passbolt on stable Unix-like operating system distributions such as Debian, Centos or FreeBSD. We have not tested passbolt on Windows (please do let us know if you tried).</p>

    <h3 id="web-server-requirements">Web server requirements</h3>

    <ul>
      <li>Apache or Nginx web server with SSL enabled.</li>
      <li>Pretty urls: with mod_rewrite <a href="http://book.cakephp.org/2.0/en/installation/url-rewriting.html#apache-and-mod-rewrite-and-htaccess">for apache</a>, and a site-available configuration <a href="http://book.cakephp.org/2.0/en/installation/url-rewriting.html#pretty-urls-on-nginx">for nginx</a>.</li>
    </ul>

    <h3 id="a-word-about-ssl">A word about SSL</h3>

    <p>By default passbolt is configured to force SSL connections, which means that whoever tries to access your passbolt instance without an https connection will automatically be redirected to https. For this reason, if https is not enabled on your host at the time of the installation, passbolt will not be able to work.</p>

    <p>However, if you know what you are doing, and wish to disable https, you can change this setting by editing <code class="language-plaintext highlighter-rouge">/app/Config/app.php</code> and set the parameter <code class="language-plaintext highlighter-rouge">App.force_ssl</code> to false. Keep in mind that this setting will make your installation unsecure and should be used for development or testing only.</p>

    <h3 id="php-requirements">PHP requirements</h3>

    <ul>
      <li>PHP &gt;= 5.4.</li>
      <li>Either one of these image manipulation libraries (to manipulate avatars):
        <ul>
          <li><a href="http://php.net/manual/en/book.image.php">GD2</a>.</li>
          <li><a href="http://php.net/manual/en/book.imagick.php">Imagick</a>.</li>
          <li><a href="http://php.net/manual/en/book.gmagick.php">Gmagick</a>.</li>
        </ul>
      </li>
      <li><a href="http://php.net/manual/en/gnupg.installation.php">GnuPG</a> for PHP: for key verification and authentication.</li>
      <li>PHP extensions (that may or may not come by default): PDO, intl, openssl, ctype, filter, hash, phar.</li>
    </ul>

    <h4 id="the-following-php-modules-are-greatly-recommended">The following PHP modules are greatly recommended:</h4>

    <ul>
      <li><a href="http://php.net/manual/en/memcached.setup.php">Memcached</a>: to store sessions. If you are using memcached: json, session, pecl-memcached are also required as dependencies.</li>
    </ul>

    <h3 id="database-requirements">Database requirements</h3>

    <div class="message warning">
    <p>
        Currently passbolt only works with Mysql due to the view we use to check permissions. If you want to help us make it work on postgresql, do get in touch!
    </p>
    
</div>

    <ul>
      <li>MySQL &gt;= 5.0.</li>
    </ul>

    <h2 id="generate-the-gpg-server-key">Generate the GPG server key</h2>

    <p>The main <a href="?php echo Router::url('/help/tech/auth'); ?">authentication method</a> of passbolt is based on GPG. For this reason, it is required that you generate a GPG server key, and add it to the configuration.</p>

    <h3 id="generate-a-new-key">Generate a new key</h3>
    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>gpg <span class="nt">--gen-key</span>
</code></pre></div>    </div>

    <p>Answer the few questions asked by GPG, and <strong>do not enter a passphrase</strong>. Due to limitations of PHP GnuPG, passbolt can not work with a key that has a passphrase.</p>

    <p>When key generation is complete, make sure you note down the key fingerprint. It is a 40 char in length string, displayed at the end of the command output. For example:</p>
    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>pub   4096R/573EE67E 2015-10-26 <span class="o">[</span>expires: 2019-10-26]
      Key fingerprint <span class="o">=</span> 2FC8 9458 33C5 1946 E937  F9FE D47B 0811 573E E67E
uid   Passbolt Server Test Key &lt;no-reply@passbolt.com&gt;
</code></pre></div>    </div>
    <h3 id="export-the-newly-created-key">Export the newly created key</h3>

    <p>Export the public and private key</p>
    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>gpg <span class="nt">--armor</span> <span class="nt">--export-secret-keys</span> your_email@domain.com <span class="o">&gt;</span> /var/www/passbolt/app/Config/gpg/private.key
gpg <span class="nt">--armor</span> <span class="nt">--export</span> your_email@domain.com <span class="o">&gt;</span> /var/www/passbolt/app/Config/gpg/public.key
</code></pre></div>    </div>
    <p>Store both these files in a secure location on the server. They should be accessible by the web server user. In this example, we are storing them in the Config directory of passbolt.</p>

    <h2 id="get-the-code">Get the code</h2>

    <p>Get the passbolt code from the <a href="https://github.com/passbolt/passbolt">github repository</a>:</p>
    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git clone https://github.com/passbolt/passbolt.git
</code></pre></div>    </div>
    <h2 id="set-the-file-permissions">Set the file permissions</h2>

    <p>Make sure the <code class="language-plaintext highlighter-rouge">app/tmp</code> and <code class="language-plaintext highlighter-rouge">app/webroot/img/public</code> are writable by the webserver user (www-data or similar).</p>
    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">chmod</span> +w <span class="nt">-R</span> app/tmp
<span class="nb">chmod</span> +w app/webroot/img/public
</code></pre></div>    </div>
    <h2 id="configure-the-php-application">Configure the php application</h2>

    <p>The configuration of your passbolt instance is a crucial step to make it work as per your needs and to ensure an optimal level of security. Pay a close attention to the steps described below.</p>

    <h3 id="corephp-core-settings">core.php (core settings)</h3>

    <p>The CakePHP core configuration file (located in <code class="language-plaintext highlighter-rouge">app/Config/core.php</code>) is the base configuration file. It contains the settings that determine the application behavior (debug mode, cache, sessions, etc..).</p>

    <p>Copy the default core configuration file:</p>
    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">cp </span>app/Config/core.php.default app/Config/core.php
</code></pre></div>    </div>
    <p>However, you need to modify the cypherseed and salt. Passbolt do not actually use these, but it is part of the standard CakePHP installation to change these values.</p>
    <div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">Configure</span><span class="o">::</span><span class="nf">write</span><span class="p">(</span><span class="s1">'Security.salt'</span><span class="p">,</span> <span class="s1">'put your own salt here'</span><span class="p">);</span>
<span class="nc">Configure</span><span class="o">::</span><span class="nf">write</span><span class="p">(</span><span class="s1">'Security.cipherSeed'</span><span class="p">,</span> <span class="s1">'put your own cipher seed here'</span><span class="p">);</span>
</code></pre></div>    </div>
    <p>Also for images that are sent in emails to work, we need to tell cakephp what is the base url. To fix this, uncomment and edit this line in <code class="language-plaintext highlighter-rouge">app/Config/core.php</code>:</p>
    <div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">Configure</span><span class="o">::</span><span class="nf">write</span><span class="p">(</span><span class="s1">'App.fullBaseUrl'</span><span class="p">,</span> <span class="s1">'http://{your domain without slash}'</span><span class="p">);</span>
</code></pre></div>    </div>
    <p>The rest of the default version of core.php is good enough to be used as it is.</p>

    <h3 id="databasephp-database-connection-settings">database.php (database connection settings)</h3>

    <p>The database configuration file (located in <code class="language-plaintext highlighter-rouge">app/Config/database.php</code>) file contains the database connection settings.</p>

    <p>Copy the default database configuration file :</p>
    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">cp </span>app/Config/database.php.default app/Config/database.php
</code></pre></div>    </div>

    <p>Then edit it. You will need to provide the name of your database, the username and password of the mysql user that passbolt can use to connect. For example:</p>

    <div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">public</span> <span class="nv">$default</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">'datasource'</span> <span class="o">=&gt;</span> <span class="s1">'Database/Mysql'</span><span class="p">,</span>
    <span class="s1">'persistent'</span> <span class="o">=&gt;</span> <span class="kc">false</span><span class="p">,</span>
    <span class="s1">'host'</span> <span class="o">=&gt;</span> <span class="s1">'localhost'</span><span class="p">,</span>
    <span class="s1">'login'</span> <span class="o">=&gt;</span> <span class="s1">'username'</span><span class="p">,</span>
    <span class="s1">'password'</span> <span class="o">=&gt;</span> <span class="s1">'password'</span><span class="p">,</span>
    <span class="s1">'database'</span> <span class="o">=&gt;</span> <span class="s1">'passbolt'</span>
<span class="p">);</span>
</code></pre></div>    </div>
    <h3 id="appphp-application-settings">app.php (application settings)</h3>

    <p>The passbolt application configuration (located in <code class="language-plaintext highlighter-rouge">app/Config/app.php</code>) contains the application settings. Copy the app.php.default configuration file to create one for your instance:</p>
    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">cp </span>app/Config/app.php.default app/Config/app.php
</code></pre></div>    </div>

    <p>You will need to specify the details of the GPG servery key, e.g. the location of the public and private key and the fingerprint. You also need to make sure that the webserver can access the gpg keyring. You can either add set it manually with <code class="language-plaintext highlighter-rouge">$GNUPGHOME</code> or in your config as follow:</p>
    <div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$config</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s1">'GPG'</span> <span class="o">=&gt;</span> <span class="p">[</span>
        <span class="s1">'env'</span> <span class="o">=&gt;</span> <span class="p">[</span>
            <span class="s1">'setenv'</span> <span class="o">=&gt;</span> <span class="kc">true</span><span class="p">,</span>
            <span class="s1">'home'</span> <span class="o">=&gt;</span> <span class="s1">'/usr/share/httpd/.gnupg'</span>
        <span class="p">],</span>
        <span class="s1">'serverKey'</span> <span class="o">=&gt;</span> <span class="p">[</span>
            <span class="s1">'fingerprint'</span> <span class="o">=&gt;</span> <span class="s1">'2FC8945833C51946E937F9FED47B0811573EE67D'</span><span class="p">,</span>
            <span class="s1">'public'</span> <span class="o">=&gt;</span> <span class="no">APP</span> <span class="mf">.</span> <span class="s1">'Config'</span> <span class="mf">.</span> <span class="no">DS</span> <span class="mf">.</span> <span class="s1">'gpg'</span> <span class="mf">.</span> <span class="no">DS</span> <span class="mf">.</span> <span class="s1">'public.key'</span><span class="p">,</span>
            <span class="s1">'private'</span> <span class="o">=&gt;</span> <span class="no">APP</span> <span class="mf">.</span> <span class="s1">'Config'</span> <span class="mf">.</span> <span class="no">DS</span> <span class="mf">.</span> <span class="s1">'gpg'</span> <span class="mf">.</span> <span class="no">DS</span> <span class="mf">.</span> <span class="s1">'private.key'</span><span class="p">,</span>

        <span class="p">]</span>
    <span class="p">]</span>
<span class="p">]</span>
</code></pre></div>    </div>
    <p>The default file is good to be used as it is. However, you might want to look at these interesting options :</p>

    <ul>
      <li><strong>App.ssl.force</strong> (true or false, default: true): Defines if passbolt should force ssl connections.</li>
      <li><strong>App.registration.public</strong> (true or false, default: true): Defines if users can self register, or if only the administrator can create new accounts.</li>
      <li><strong>App.meta.robots.index</strong> (true or false, default: false): Defines if you want search engines to find and index your instance.</li>
      <li><strong>App.selenium.active</strong> (true or false, default:false): Do not change this to true unless you want to run the <a href="https://github.com/passbolt/passbolt_selenium">selenium tests</a>. It is to be used in development environment only, and setting this option to true will compromise the security of your installation.</li>
    </ul>

    <h3 id="emailphp-email-settings">email.php (email settings)</h3>

    <p>The <code class="language-plaintext highlighter-rouge">app/Config/email.php</code> configuration file defines your email settings to enable passbolt send emails to the world. Make sure you provide the correct settings. Without this, passbolt will not be able to send notifications email.</p>
    <div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">public</span> <span class="nv">$default</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">'transport'</span> <span class="o">=&gt;</span> <span class="s1">'Smtp'</span><span class="p">,</span>
    <span class="s1">'from'</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span><span class="s1">'passbolt@yourdomain.com'</span> <span class="o">=&gt;</span> <span class="s1">'Passbolt'</span><span class="p">),</span>
    <span class="s1">'host'</span> <span class="o">=&gt;</span> <span class="s1">'smtp.yourserver.com'</span><span class="p">,</span>
    <span class="s1">'port'</span> <span class="o">=&gt;</span> <span class="mi">587</span><span class="p">,</span>
    <span class="s1">'timeout'</span> <span class="o">=&gt;</span> <span class="mi">30</span><span class="p">,</span>
    <span class="s1">'username'</span> <span class="o">=&gt;</span> <span class="s1">'your@email.com'</span><span class="p">,</span>
    <span class="s1">'password'</span> <span class="o">=&gt;</span> <span class="s1">'password'</span><span class="p">,</span>
<span class="p">);</span>
</code></pre></div>    </div>
    <p>You only need to modify the default variable, and leave the other sections of this file alone.</p>

    <h2 id="run-the-install-script">Run the install script</h2>

    <p>The configuration is all set! We can now install passbolt.</p>

    <p>Passbolt can be installed via a command line installation script.</p>
    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>app/Console/cake <span class="nb">install</span> <span class="nt">--no-admin</span>
</code></pre></div>    </div>
    <p>In this command, we also mention that we do not want a default administrator. We will create one explicitely at the next step.</p>

    <p><strong>Note :</strong> To avoid any permission issues, mostly with the keyring, it is recommended to execute the PHP cli with the webserver rights. For instance:</p>
    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>su <span class="nt">-s</span> /bin/bash <span class="nt">-c</span> <span class="s2">"app/Console/cake install --no-admin"</span> www-data
</code></pre></div>    </div>
    <h3 id="create-the-first-admin-account">Create the first admin account</h3>

    <p>An admin user will be able to manage the other users on passbolt. You will need at least one:</p>
    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>app/Console/cake passbolt register_user <span class="nt">-u</span> me@domain.com <span class="nt">-f</span> myFirtsname <span class="nt">-l</span> myLastname <span class="nt">-r</span> admin
</code></pre></div>    </div>
    <p>After the admin user creation, the command line tool will give you a setup link which will also be sent to you by email (if your emails are properly configured). Follow the link given to setup your account.</p>

    <h2 id="enabling-emails">Enabling emails</h2>

    <p>Emails are placed in a queue that needs to be processed by a CakePhp Shell. You can add a cron call to the script so the emails will be sent every minute. Add the following line to you crontab:</p>
    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="k">*</span> <span class="k">*</span> <span class="k">*</span> <span class="k">*</span> <span class="k">*</span> /var/www/passbolt/app/Console/cake EmailQueue.sender <span class="o">&gt;</span> /var/log/passbolt.log
</code></pre></div>    </div>
    <p>And you are done!</p>

    <h1 id="troubleshooting">Troubleshooting</h1>

    <p>The healthcheck is a tool that can help you identify what are the problems with your install. It is accessible from the command line:</p>
    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>./app/Console/cake passbolt healthcheck
</code></pre></div>    </div>
    <p>When the application is on debug mode (or if you are logged in as an administrator), a simplified dashboard version is also accessible directly in the browser at the url : /healthcheck</p>

    <figure>
    <img src="https://help.passbolt.com/assets/img/screenshots/AD_healthcheck.jpg" alt="example /healthcheck screen" style="max-width:;" />
    <span class="legend">fig. example /healthcheck screen</span>
</figure>

    <p>You will find below a list of common errors, and how to solve them.</p>

    <h3 id="i-get-the-error-gpg-keyring-is-not-available-or-not-writable-at-install">I get the error GPG Keyring is not available or not writable at install</h3>

    <p>It is possible that your <code class="language-plaintext highlighter-rouge">$GNUPGHOME</code> is not set or not available to either the php CLI or Apache users thus causing a segmentation fault.</p>

    <ul>
      <li>Check <code class="language-plaintext highlighter-rouge">app/Config/app.php</code>. If you don’t have ssh access, it can be set at run time with <code class="language-plaintext highlighter-rouge">GPG.env.home</code> variable.</li>
      <li>Make sure the directory is accessible and writable for the PHP CLI and Apache users.</li>
    </ul>

    <p>It is commonly solved by executing this command:</p>
    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">chown</span> <span class="nt">-R</span> www-data:www-data /home/www-data/.gnupg
</code></pre></div>    </div>
    <h3 id="i-get-an-error-saying-the-gpg-server-key-defined-in-the-config-is-not-found">I get an error saying the GPG Server key defined in the config is not found</h3>

    <p>If you are running passbolt on FreeBSD make sure the <code class="language-plaintext highlighter-rouge">$PATH</code> for the www user include <code class="language-plaintext highlighter-rouge">/usr/local/{s,}bin</code>. Otherwise Apache won’t be able to find the gpg modules. Something like this should do:</p>
    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">PATH</span><span class="o">=</span>/sbin:/bin:/usr/sbin:/usr/bin:/usr/local/sbin:/usr/local/bin
</code></pre></div>    </div>
    <h3 id="i-get-the-error-that-the-gpg-key-fingerprint-is-not-found-in-the-keyring">I get the error that the GPG key fingerprint is not found in the keyring</h3>

    <p>It is possible that the keyring location specified by the app.php is not writable for the web application, or that you made a mistake in specifying $GNUPGHOME. You can check if the fingerprint exist in a given keyring for a given user as follow.</p>
    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>su <span class="nt">-s</span> /bin/bash <span class="nt">-c</span> <span class="s2">"gpg --list-keys --fingerprint --home /home/www-data/.gnupg"</span> www-data | <span class="nb">grep</span> <span class="nt">-i</span> <span class="nt">-B</span> 2 <span class="s1">'Passbolt Server'</span>
pub   4096R/573EE67E 2015-10-26 <span class="o">[</span>expires: 2019-10-26]
      Key fingerprint <span class="o">=</span> 2FC8 9458 33C5 1946 E937  F9FE D47B 0811 573E E67E
uid   Passbolt Server Test Key &lt;no-reply@passbolt.com&gt;
</code></pre></div>    </div>
    <h3 id="at-the-end-of-the-setup-i-get-an-error-saying-invalid-request-method-should-be-put">At the end of the setup I get an error saying “Invalid request method, should be PUT”</h3>

    <p>Make sure your webserver config is not rewriting the PUT method to POST. See. <a href="https://github.com/passbolt/passbolt_api/issues/52">Issue #52</a>.</p>

    <h3 id="passbolt-emails-are-not-being-sent-by-gmail">Passbolt emails are not being sent by GMail</h3>

    <p>If you have two step verification enabled on your google account you will need to create an App Password. See. <a href="https://github.com/passbolt/passbolt_api/issues/51">Issue #51</a>.</p>

    <h3 id="when-trying-to-login-im-stuck-on-loading-please-wait">When trying to login I’m stuck on “loading, please wait”</h3>

    <p>This can indicate that the fullBaseUrl is not set right in the app/Config/core.php, like the url is correct but not the SSL scheme (e.g. http instead of https). See. <a href="https://github.com/passbolt/passbolt_api/issues/47">Issue #47</a>.</p>

    <h3 id="last-updated">Last updated</h3>

    <div class="last-updated">
      <h3>Last updated</h3>
      <p>This article was last updated on 
March
20th,
2017.</p>
    </div>

  </div>
  <div class="col4 last push1">

    <div class="message tldr warning">
    <p>This article is about passbolt v1 and is kept for archival. Please install passbolt version 2 instead.</p>
    
    <a href="/hosting/install" class="button ">Install passbolt version 2</a>
    
</div>

  </div>
</div>

                    </article>
                </div>
            </div>
        </div>
            <footer>
        <div class="footer">
            <ul class="footer-links">
                <li><a href="https://www.passbolt.com/licence">Terms</a></li>
                <li><a href="https://www.passbolt.com/privacy">Privacy</a></li>
                <li><a href="https://www.passbolt.com/credits">Credits</a></li>
                <li><a href="https://careers.passbolt.com">Careers</a></li>
            </ul>
        </div>
    </footer>
    <div id="cookies-eu-banner" class="visually-hidden">
        🍪 &nbsp; Do you accept cookies for statistical purposes?
        <a href="https://www.passbolt.com/privacy" id="cookies-eu-more">(Read more)</a>
        <a class="button primary" id="cookies-eu-accept">Accept</a>
        <a id="cookies-eu-reject">No thanks!</a>
    </div>


    </div>
    <script src="https://consent.cookiebot.com/uc.js" data-cbid="900808a8-f178-4994-b2ad-66bf3ccca5f7" data-blockingmode="auto" strategy="beforeInteractive"></script>
<script src="https://help.passbolt.com/assets/js/matomo-tag-manager.js"></script>
<script src="https://help.passbolt.com/assets/js/matomo-analytics.js"></script>
<script src="https://code.jquery.com/jquery-3.5.0.slim.min.js" integrity="sha384-/IFzzQmt1S744I+IQO4Mc1uphkxbXt1tEwjQ/qSw2p8pXWck09sLvqHmKDYYwReJ" crossorigin="anonymous"></script>
<script src="https://help.passbolt.com/assets/js/analytics.js"></script>
<script src="https://help.passbolt.com/assets/js/greedynav.js"></script>
</body>

</html>