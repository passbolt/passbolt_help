<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Passbolt Help | Upgrade Passbolt from CE to Pro on Debian</title>
    <!--
             ____                  __          ____
            / __ \____  _____ ____/ /_  ____  / / /_
           / /_/ / __ `/ ___/ ___/ __ \/ __ \/ / __/
          / ____/ /_/ (__  |__  ) /_/ / /_/ / / /_
         /_/    \__,_/____/____/_.___/\____/_/\__/

         Open source password manager for teams
         ¬© 2019 Passbolt SA

     -->
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta property="og:image" content="https://help.passbolt.com/assets/img/background/og_preview.jpg" />
    <meta property="og:title" content="Upgrade Passbolt from CE to Pro on Debian" />
    <meta property="og:description" content="" />
    <link rel="stylesheet" href="https://help.passbolt.com/assets/css/help.min.css">
    <link rel="stylesheet" href="https://help.passbolt.com/assets/css/highlight.css">
    <link rel="stylesheet" href="https://help.passbolt.com/assets/css/cookie-eu-banner.css">
    <link rel="stylesheet" href="https://help.passbolt.com/assets/css/custom.css">
    <link rel="canonical" href="https://help.passbolt.com/hosting/upgrade/pro/upgrade-pro-from-ce-debian">
    <link rel="shortcut icon" type="image/x-icon" href="https://help.passbolt.com/assets/favicon.ico" />
    <link rel="alternate" type="application/rss+xml" title="Passbolt | Help" href="https://help.passbolt.com/feed.xml">
</head>


<body>
    <div id="container" class="help page background">
            <header>
        <div class="header first ">
            <nav class="greedy">
                <div class="top navigation primary">
                    <ul class="links clearfix">
                        <li class="home with-text"><a href="http://www.passbolt.com/"><span>home</span></a></li>
                        <li class="left"><a href="https://www.passbolt.com/services"><span>pricing</span></a></li>
                        <li class="left"><a href="https://www.passbolt.com/roadmap"><span>roadmap</span></a></li>
                        <li class="left"><a href="https://community.passbolt.com/"><span>forum</span></a></li>
                        <li class="left"><a href="https://www.passbolt.com/blog"><span>blog</span></a></li>
                        <li class="left selected"><a href="https://help.passbolt.com/"><span>help</span></a></li>
                        <li class="left"><a href="https://demo.passbolt.com" class="highlighted" target="_blank" rel="noopener"><span>try it!</span></a></li>
                    </ul>
                    <button class="hidden" count="0">more</button>
                    <ul class="hidden-links hidden"></ul>
                </div>
            </nav>
        </div>
    </header>
    <div class="header second">
        <div class="col1">
            <div class="logo no-img">
                <h1><span>Passbolt</span></h1>
            </div>
        </div>
        <div class="col2 search-wrapper">
            <h2 class="visuallyhidden">Help Search</h2>
            <div>
                <form class="search ready" action="/search.html" method="get">
                    <div class="input required">
                        <label for="search-box">Search</label>
                        <input id="search-box" name="query" maxlength="64" placeholder="Help search" class="fuzzy-search" type="search">
                    </div>
                    <button value="search">
                        <i class="fa fa-fw fa-search"></i>
                        <span class="text visuallyhidden">search</span>
                    </button>
                </form>
            </div>
        </div>
        <div class="col3">
            <div class="edit-on-github">
                <a href="https://github.com/passbolt/passbolt_help/edit/master/_posts/hosting/upgrade/2021-11-02-hosting-upgrade-pro-from-ce-debian.md" class="button">
                    <i class="fa fa-github-alt fa-fw"></i> Edit on github</a>
            </div>
        </div>
    </div>

        <div class="panel main" aria-label="Content">
            <div class="panel left">
                
                







<div class="navigation-help" role="navigation">
    <ul>
        <li>
            <h2>Hosting</h2>
        </li>
        
        <li >
            <a href="https://help.passbolt.com/faq/hosting">Hosting FAQ</a>
        </li>
        
        
        <li >
            <a href="https://help.passbolt.com/hosting/install">Installation</a>
        </li>
        
        
        <li >
            <a href="https://help.passbolt.com/hosting/update">Update</a>
        </li>
        
        
        <li >
            <a href="https://help.passbolt.com/hosting/upgrade">Upgrade</a>
        </li>
        
        
        
        
        <li >
            <a href="https://help.passbolt.com/hosting/backup">Backup</a>
        </li>
        
        
        <li >
            <a href="https://community.passbolt.com/c/installation-issues">Installation issues</a>
        </li>
        
        
    </ul>
</div>










                
            </div>
            <div class="panel middle" data-spy="scroll" data-target=".scrollspy">
                <div class="grid grid-responsive-12">
                    <article>
                        <div class="row" id="introduction">
    <div class="col12">
        <div class="breadcrumbs">
            <ul>
                <li>
                    <div class="main-cell">
                        <a href="https://www.passbolt.com"><span>home</span></a>
                    </div>
                </li>
                <li>
                    <div class="main-cell">
                        <a href="/"><span>help</span></a>
                    </div>
                </li>
                
                
                <li>
                    <div class="main-cell">
                        <a href="https://help.passbolt.com/hosting"><span>hosting</span></a>
                    </div>
                </li>
                
                <li>
                    <div class="main-cell">
                        <a href="https://help.passbolt.com/hosting/upgrade"><span>upgrade</span></a>
                    </div>
                </li>
                
                
                
                
                <li>
                    <div class="main-cell">
                        <a href="https://help.passbolt.com/hosting/upgrade/pro/upgrade-pro-from-ce-debian.html"><span>upgrade-pro-from-ce-debian</span></a>
                    </div>
                </li>
                
            </ul>
        </div>
    </div>
</div>

                        <div class="row" markdown="1">
<div class="col7" markdown="1">
<h1>Upgrade Passbolt from CE to Pro on Debian</h1>
</div>
</div>

                        
<div class="row">
  <div class="col7">

    <h2 id="pre-requisites">Pre-requisites</h2>

    <p>For this tutorial, you will need:</p>
    <ul>
      <li>A minimal Debian server.</li>
      <li>Passbolt CE Debian package installed.</li>
    </ul>

    <h2 id="upgrading-passbolt">Upgrading passbolt</h2>

    <h3 id="take-down-your-site">1. Take down your site</h3>

    <p>It is generally a good idea to stop running the site prior to the upgrade. This is to avoid having side effects
such as active users corrupting the data in the middle of an upgrade.</p>

    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">sudo </span>systemctl stop nginx
</code></pre></div>    </div>

    <h3 id="backup-passbolt">2. Backup passbolt</h3>

    <p>First things first, as this is a sensitive operation a backup of the instance must be performed to prevent any data loss.
You can follow our <a href="/hosting/backup/debian">backup process</a>.</p>

    <h3 id="upload-your-subscription-key">3. Upload your subscription key</h3>

    <p>You should copy your subscription key to <code class="language-plaintext highlighter-rouge">/etc/passbolt/subscription_key.txt</code> and ensure the permissions are correct.</p>

    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo chown </span>root:www-data /etc/passbolt/subscription_key.txt
<span class="nb">sudo chmod </span>640 /etc/passbolt/subscription_key.txt
</code></pre></div>    </div>

    <h3 id="uninstall-passbolt-ce">4. Uninstall passbolt CE</h3>

    <p>Passbolt CE package should be removed prior to installing passbolt Pro.</p>

    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>apt-get remove passbolt-ce-server
</code></pre></div>    </div>

    <h3 id="update-passbolt-package-repository">5. Update passbolt package repository</h3>

    <p>For easier installation and update tasks Passbolt provides a package repository that you need to setup
before you download Passbolt PRO and install it.</p>

    <p><strong>Step 1.</strong> Download our dependencies installation script:</p>

    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>wget "https://download.passbolt.com/pro/installer/passbolt-repo-setup.pro.sh"
</code></pre></div>    </div>

    <p><strong>Step 2.</strong> Download our SHA512SUM for the installation script:</p>

    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>wget https://github.com/passbolt/passbolt-dep-scripts/releases/latest/download/passbolt-pro-SHA512SUM.txt
</code></pre></div>    </div>

    <p><strong>Step 3.</strong> Ensure that the script is valid and execute it:</p>

    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sha512sum -c passbolt-pro-SHA512SUM.txt &amp;&amp; sudo bash ./passbolt-repo-setup.pro.sh  --passbolt-migrate  || echo \"Bad checksum. Aborting\" &amp;&amp; rm -f passbolt-repo-setup.pro.sh
</code></pre></div>    </div>

    <h3 id="install-passbolt-pro">6. Install passbolt Pro</h3>

    <p>Now you can install the passbolt Pro package.</p>

    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>apt-get <span class="nb">install </span>passbolt-pro-server
</code></pre></div>    </div>

    <p>As you have already configured passbolt CE, and passbolt Pro relies on the same configuration, you should reply:</p>

    <ul>
      <li><strong>No</strong> for mariadb configuration</li>
      <li><strong>No</strong> to nginx configuration</li>
    </ul>

    <h3 id="migrate-the-data">7. Migrate the data</h3>

    <p>Once the package installed, run the following command to migrate the data to passbolt Pro:</p>

    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo</span> <span class="nt">-H</span> <span class="nt">-u</span> www-data /bin/bash <span class="nt">-c</span> <span class="s2">"/usr/share/php/passbolt/bin/cake passbolt migrate"</span>
</code></pre></div>    </div>

    <h3 id="clear-the-cache">8. Clear the cache</h3>

    <p>Make sure you clear the application cache, to make sure any changes in the database structure are reflected in
model cache files:</p>

    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo</span> <span class="nt">-H</span> <span class="nt">-u</span> www-data bash <span class="nt">-c</span> <span class="s2">"/usr/share/php/passbolt/bin/cake cache clear_all"</span>
</code></pre></div>    </div>

    <h3 id="ensure-you-dont-have-duplicate-cron-jobs">9. Ensure you don‚Äôt have duplicate cron jobs</h3>

    <p>As you are upgrading from CE to Pro you will need to make sure you don‚Äôt have duplicate cronjobs.</p>

    <p>You can do this by checking <code class="language-plaintext highlighter-rouge">/etc/cron.d/</code></p>

    <p>You may see:</p>
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>/etc/cron.d/passbolt-ce-server
/etc/cron.d/passbolt-pro-server 
</code></pre></div>    </div>

    <p>If this is the case you‚Äôll want to run:</p>
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>rm /etc/cron.d/passbolt-ce-server
</code></pre></div>    </div>

    <p>As this will clear out the no longer needed CE job to send emails. If you leave this you may experience receiving duplicate emails.</p>

    <p>The other regularly occuring job which you can remove will be under <code class="language-plaintext highlighter-rouge">/etc/logrotate.d/</code></p>

    <p>You may see:</p>
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>/etc/logrotate.d/passbolt-ce-server
/etc/logrotate.d/passbolt-pro-server
</code></pre></div>    </div>

    <p>If this is the case you‚Äôll want to run:</p>
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>rm /etc/logrotate.d/passbolt-ce-server
</code></pre></div>    </div>

    <p>This will clean up the no longer needed log rotation job.</p>

    <h3 id="take-your-site-back-up">10. Take your site back up</h3>

    <p>Finally take passbolt back up:</p>

    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>systemctl start nginx
</code></pre></div>    </div>

    <div class="last-updated">
      <h3>Last updated</h3>
      <p>This article was last updated on 
November
2nd,
2021.</p>
    </div>

  </div>
  <div class="col4 last push1">

    <div class="message tldr">
    <p>Your installation is not based on a debian package?</p>
    
    <a href="/hosting/upgrade/ce/migrate-to-debian.html" class="button ">Migrate passbolt to debian package</a>
    
</div>

    <div class="message tldr notice">
    <p>Are you experiencing issues with Passbolt Pro Edition?</p>
    <a href="mailto:contact@passbolt.com" class="button primary">Contact Pro support</a>
    <p>or <a href="https://community.passbolt.com">ask the community</a></p>

</div>

  </div>
</div>

                    </article>
                </div>
            </div>
        </div>
            <footer>
        <div class="footer">
            <ul class="footer-links">
                <li><a href="https://www.passbolt.com/licence">Terms</a></li>
                <li><a href="https://www.passbolt.com/privacy">Privacy</a></li>
                <li><a href="https://www.passbolt.com/credits">Credits</a></li>
                <li><a href="https://careers.passbolt.com">Careers</a></li>
            </ul>
        </div>
    </footer>
    <div id="cookies-eu-banner" class="visually-hidden">
        üç™ &nbsp; Do you accept cookies for statistical purposes?
        <a href="https://www.passbolt.com/privacy" id="cookies-eu-more">(Read more)</a>
        <a class="button primary" id="cookies-eu-accept">Accept</a>
        <a id="cookies-eu-reject">No thanks!</a>
    </div>


    </div>
    <script src="https://consent.cookiebot.com/uc.js" data-cbid="900808a8-f178-4994-b2ad-66bf3ccca5f7" data-blockingmode="auto" strategy="beforeInteractive"></script>
<script src="https://help.passbolt.com/assets/js/matomo-tag-manager.js"></script>
<script src="https://help.passbolt.com/assets/js/matomo-analytics.js"></script>
<script src="https://code.jquery.com/jquery-3.5.0.slim.min.js" integrity="sha384-/IFzzQmt1S744I+IQO4Mc1uphkxbXt1tEwjQ/qSw2p8pXWck09sLvqHmKDYYwReJ" crossorigin="anonymous"></script>
<script src="https://help.passbolt.com/assets/js/analytics.js"></script>
<script src="https://help.passbolt.com/assets/js/greedynav.js"></script>
</body>

</html>