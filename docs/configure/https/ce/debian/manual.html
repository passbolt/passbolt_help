<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Passbolt Help | Manual HTTPS configuration on Debian and Ubuntu with user provided certificates</title>
    <!--
             ____                  __          ____
            / __ \____  _____ ____/ /_  ____  / / /_
           / /_/ / __ `/ ___/ ___/ __ \/ __ \/ / __/
          / ____/ /_/ (__  |__  ) /_/ / /_/ / / /_
         /_/    \__,_/____/____/_.___/\____/_/\__/

         Open source password manager for teams
         © 2019 Passbolt SA

     -->
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta property="og:image" content="https://help.passbolt.com/assets/img/background/og_preview.jpg" />
    <meta property="og:title" content="Manual HTTPS configuration on Debian and Ubuntu with user provided certificates" />
    <meta property="og:description" content="" />
    <link rel="stylesheet" href="https://help.passbolt.com/assets/css/help.min.css">
    <link rel="stylesheet" href="https://help.passbolt.com/assets/css/highlight.css">
    <link rel="stylesheet" href="https://help.passbolt.com/assets/css/cookie-eu-banner.css">
    <link rel="stylesheet" href="https://help.passbolt.com/assets/css/custom.css">
    <link rel="canonical" href="https://help.passbolt.com/configure/https/ce/debian/manual">
    <link rel="shortcut icon" type="image/x-icon" href="https://help.passbolt.com/assets/favicon.ico" />
    <link rel="alternate" type="application/rss+xml" title="Passbolt | Help" href="https://help.passbolt.com/feed.xml">
</head>


<body>
    <div id="container" class="help page background">
            <header>
        <div class="header first ">
            <nav class="greedy">
                <div class="top navigation primary">
                    <ul class="links clearfix">
                        <li class="home with-text"><a href="http://www.passbolt.com/"><span>home</span></a></li>
                        <li class="left"><a href="https://www.passbolt.com/services"><span>pricing</span></a></li>
                        <li class="left"><a href="https://www.passbolt.com/roadmap"><span>roadmap</span></a></li>
                        <li class="left"><a href="https://community.passbolt.com/"><span>forum</span></a></li>
                        <li class="left"><a href="https://www.passbolt.com/blog"><span>blog</span></a></li>
                        <li class="left selected"><a href="https://help.passbolt.com/"><span>help</span></a></li>
                        <li class="left"><a href="https://demo.passbolt.com" class="highlighted" target="_blank" rel="noopener"><span>try it!</span></a></li>
                    </ul>
                    <button class="hidden" count="0">more</button>
                    <ul class="hidden-links hidden"></ul>
                </div>
            </nav>
        </div>
    </header>
    <div class="header second">
        <div class="col1">
            <div class="logo no-img">
                <h1><span>Passbolt</span></h1>
            </div>
        </div>
        <div class="col2 search-wrapper">
            <h2 class="visuallyhidden">Help Search</h2>
            <div>
                <form class="search ready" action="/search.html" method="get">
                    <div class="input required">
                        <label for="search-box">Search</label>
                        <input id="search-box" name="query" maxlength="64" placeholder="Help search" class="fuzzy-search" type="search">
                    </div>
                    <button value="search">
                        <i class="fa fa-fw fa-search"></i>
                        <span class="text visuallyhidden">search</span>
                    </button>
                </form>
            </div>
        </div>
        <div class="col3">
            <div class="edit-on-github">
                <a href="https://github.com/passbolt/passbolt_help/edit/master/_posts/configure/2021-12-16-configure-https-debian-manual.md" class="button">
                    <i class="fa fa-github-alt fa-fw"></i> Edit on github</a>
            </div>
        </div>
    </div>

        <div class="panel main" aria-label="Content">
            <div class="panel left">
                
                









<div class="navigation-help" role="navigation">
    <ul>
        <li>
            <h2>Configure</h2>
        </li>
        
        <li >
            <a href="https://help.passbolt.com/configure/https">Configure HTTPS</a>
        </li>
        
        
        
        
        <li >
            <a href="https://help.passbolt.com/configure/ldap/setup">Configure LDAP</a>
        </li>
        
        
        <li >
            <a href="https://help.passbolt.com/configure/account-recovery">Configure Account Recovery</a>
        </li>
        
        
        <li >
            <a href="https://help.passbolt.com/configure/sso/azure">Configure SSO</a>
        </li>
        
        
        <li >
            <a href="https://help.passbolt.com/configure/ldap/ldap-with-ssl">Configure LDAP with ssl</a>
        </li>
        
        
        <li >
            <a href="https://help.passbolt.com/configure/ldap/ldap-common-sync-error-messages">Troubleshoot LDAP sync errors</a>
        </li>
        
        
        <li >
            <a href="https://help.passbolt.com/configure/mfa/yubikey">Configure Yubikey</a>
        </li>
        
        
        <li >
            <a href="https://help.passbolt.com/configure/mfa/duo">Configure Duo</a>
        </li>
        
        
        <li >
            <a href="https://help.passbolt.com/configure/mfa/totp">Configure TOTP</a>
        </li>
        
        
        <li >
            <a href="https://help.passbolt.com/configure/notification/email">Configure Email Notifications</a>
        </li>
        
        
        <li >
            <a href="https://help.passbolt.com/configure/email/setup">Configure Email providers</a>
        </li>
        
        
        <li >
            <a href="https://help.passbolt.com/faq/hosting/why-email-not-sent">Troobleshoot Email config</a>
        </li>
        
        
        <li >
            <a href="https://help.passbolt.com/configure/environment/reference">Environment variable reference</a>
        </li>
        
        
        <li >
            <a href="https://help.passbolt.com/configure/database/credentials">Update database credentials</a>
        </li>
        
        
    </ul>
</div>








                
            </div>
            <div class="panel middle" data-spy="scroll" data-target=".scrollspy">
                <div class="grid grid-responsive-12">
                    <article>
                        <div class="row" id="introduction">
    <div class="col12">
        <div class="breadcrumbs">
            <ul>
                <li>
                    <div class="main-cell">
                        <a href="https://www.passbolt.com"><span>home</span></a>
                    </div>
                </li>
                <li>
                    <div class="main-cell">
                        <a href="/"><span>help</span></a>
                    </div>
                </li>
                
                
                <li>
                    <div class="main-cell">
                        <a href="https://help.passbolt.com/configure"><span>configure</span></a>
                    </div>
                </li>
                
                <li>
                    <div class="main-cell">
                        <a href="https://help.passbolt.com/configure/https"><span>https</span></a>
                    </div>
                </li>
                
                
                
                
                <li>
                    <div class="main-cell">
                        <a href="https://help.passbolt.com/configure/https/ce/debian/manual.html"><span>manual</span></a>
                    </div>
                </li>
                
            </ul>
        </div>
    </div>
</div>

                        <div class="row" markdown="1">
<div class="col7" markdown="1">
<h1>Manual HTTPS configuration on Debian and Ubuntu with user provided certificates</h1>
</div>
</div>

                        
<div class="row">
  <div class="col7">

    <div class="message warning">
    <p>
        If you are changing your domain from <b>HTTP to HTTPS</b>, you will unlink the browser extension of all the users.
Before changing the domain, you must ensure that all the users have a copy of their private key to <b><a href="/faq/start/account-recover">recover their account</a></b>.
    </p>
    
</div>

    <p>Passbolt debian and ubuntu packages currently supports the configuration of nginx. It comes with a default configuration that supports:</p>

    <ul>
      <li>Serve passbolt on port 80 (http)</li>
      <li>Serve passbolt on port 443 (https)</li>
    </ul>

    <p>On this context ‘manually’ means that the user will provide the SSL certificates, this is the main difference with
the ‘auto’ method where <a href="https://letsencrypt.org/">Let’s Encrypt</a> will issue the SSL certificate for you.</p>

    <p>This manual method is often useful on private network installations with private <a href="https://en.wikipedia.org/wiki/Certificate_authority">CA</a> where
the system admin issues a new private SSL certificate and uploads it to the passbolt server. It is also a method often used with
self-signed SSL certificates for test installations.</p>

    <p>On this example we will assume the user is generating a self-signed certificate on the passbolt server.</p>

    <h2 id="generate-the-ssl-certificate">Generate the SSL certificate</h2>

    <p>While connected to your passbolt instance you can generate a SSL certificate in the following way:</p>

    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>openssl req -x509 \
    -newkey rsa:4096 \
    -days 120 \
    -subj "/C=LU/ST=Luxembourg/L=Esch-Sur-Alzette/O=Passbolt SA/OU=Passbolt IT Team/CN=passbolt.domain.tld/" \
    -nodes \
    -addext "subjectAltName = DNS:passbolt.domain.tld" \
    -keyout key.pem \
    -out cert.pem
</code></pre></div>    </div>

    <p>This command will output two files: <strong>key.pem</strong> and <strong>cert.pem</strong>. Identify the absolute path where these files are located as you will need them in next steps.</p>

    <p>Of course, replace <code class="language-plaintext highlighter-rouge">-subj</code> values with your own. It is important to set your passbolt FQDN in both CN and subjectAltName. In this way, you will be able to import the generated certificate in your operating system keychain and make your self-signed domain trusted in your browser.</p>

    <div class="message notice">
    <p>
    <b>Pro tip:</b> You can use an IP address instead of a domain name for your self-signed certificate.
    If you do that, replace DNS with IP in subjectAltName.
    </p>
    
</div>

    <h2 id="install-or-reconfigure-passbolt">Install or reconfigure passbolt</h2>

    <p>If you don’t have passbolt installed please check on the <a href="/hosting/install">hosting section</a> for more information
on how to install passbolt on debian.</p>

    <p>If you have already installed passbolt then you want to execute the following command to start the configuration process for SSL:</p>

    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sudo dpkg-reconfigure passbolt-ce-server
</code></pre></div>    </div>

    <p>You most likely want to say ‘NO’ to the mariadb/mysql setup question and go for the nginx setup</p>

    <p>You should select yes for the nginx setup:</p>

    <figure>
    <img src="https://help.passbolt.com/assets/img/help/2020/09/debian-package/configure_nginx.png" alt="Nginx configuration message" style="max-width:450px;" />
    <span class="legend">fig. Nginx configuration message</span>
</figure>

    <p>Choose ‘manual’ for the SSL setup method:</p>

    <figure>
    <img src="https://help.passbolt.com/assets/img/help/2020/09/debian-package/ssl_method_select.png" alt="SSL method selection" style="max-width:450px;" />
    <span class="legend">fig. SSL method selection</span>
</figure>

    <p>Provide the domain name you plan to use for your passbolt server. On this example and as we are using a
self-signed certificate the domain name is not as important as if you are planning to use a proper SSL
certificate. In the later escenario DNS domain name and SSL domain name must match.</p>

    <figure>
    <img src="https://help.passbolt.com/assets/img/help/2020/09/debian-package/ssl_domain.png" alt="Domain for nginx setup" style="max-width:450px;" />
    <span class="legend">fig. Domain for nginx setup</span>
</figure>

    <p>Provide the full path of the SSL certificate you created on previous steps (‘cert.pem’)</p>

    <figure>
    <img src="https://help.passbolt.com/assets/img/help/2020/09/debian-package/ssl_cert.png" alt="SSL certificate path" style="max-width:450px;" />
    <span class="legend">fig. SSL certificate path</span>
</figure>

    <p>Now provide the full path of the SSL key (‘key.pem’)</p>

    <figure>
    <img src="https://help.passbolt.com/assets/img/help/2020/09/debian-package/key_ssl.png" alt="SSL private key path" style="max-width:450px;" />
    <span class="legend">fig. SSL private key path</span>
</figure>

    <p>Keep in mind that you might need to add DNS records to reach your domain on your local 
network or in a public DNS provider.</p>

    <figure>
    <img src="https://help.passbolt.com/assets/img/help/2020/09/debian-package/success_message.png" alt="Success message" style="max-width:450px;" />
    <span class="legend">fig. Success message</span>
</figure>

    <p>Reload nginx after finish the reconfigure to use the SSL configuration.</p>

    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>systemctl reload nginx
</code></pre></div>    </div>

    <p>Finally, ensure <b>‘fullBaseUrl’</b> value in <b>/etc/passbolt/passbolt.php</b> starts with <b>https://</b>.</p>

    <p>And that’s it you should be able to reach your server on the domain you specified.</p>

    <div class="last-updated">
      <h3>Last updated</h3>
      <p>This article was last updated on 
December
16th,
2021.</p>
    </div>

  </div>
  <div class="col4 last push1">

    <div class="message tldr notice">
    <p>Are you experiencing issues when installing passbolt?</p>
    
    <a href="https://community.passbolt.com/c/installation-issues" class="button primary">Ask the community!</a>
    
</div>

  </div>
</div>

                    </article>
                </div>
            </div>
        </div>
            <footer>
        <div class="footer">
            <ul class="footer-links">
                <li><a href="https://www.passbolt.com/licence">Terms</a></li>
                <li><a href="https://www.passbolt.com/privacy">Privacy</a></li>
                <li><a href="https://www.passbolt.com/credits">Credits</a></li>
                <li><a href="https://careers.passbolt.com">Careers</a></li>
            </ul>
        </div>
    </footer>
    <div id="cookies-eu-banner" class="visually-hidden">
        🍪 &nbsp; Do you accept cookies for statistical purposes?
        <a href="https://www.passbolt.com/privacy" id="cookies-eu-more">(Read more)</a>
        <a class="button primary" id="cookies-eu-accept">Accept</a>
        <a id="cookies-eu-reject">No thanks!</a>
    </div>


    </div>
    <script src="https://consent.cookiebot.com/uc.js" data-cbid="900808a8-f178-4994-b2ad-66bf3ccca5f7" data-blockingmode="auto" strategy="beforeInteractive"></script>
<script src="https://help.passbolt.com/assets/js/matomo-tag-manager.js"></script>
<script src="https://help.passbolt.com/assets/js/matomo-analytics.js"></script>
<script src="https://code.jquery.com/jquery-3.5.0.slim.min.js" integrity="sha384-/IFzzQmt1S744I+IQO4Mc1uphkxbXt1tEwjQ/qSw2p8pXWck09sLvqHmKDYYwReJ" crossorigin="anonymous"></script>
<script src="https://help.passbolt.com/assets/js/analytics.js"></script>
<script src="https://help.passbolt.com/assets/js/greedynav.js"></script>
</body>

</html>