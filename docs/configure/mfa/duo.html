<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Passbolt Help | How to configure passbolt to use Duo OTP</title>
    <!--
             ____                  __          ____
            / __ \____  _____ ____/ /_  ____  / / /_
           / /_/ / __ `/ ___/ ___/ __ \/ __ \/ / __/
          / ____/ /_/ (__  |__  ) /_/ / /_/ / / /_
         /_/    \__,_/____/____/_.___/\____/_/\__/

         Open source password manager for teams
         © 2019 Passbolt SA

     -->
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta property="og:image" content="https://help.passbolt.com/assets/img/background/og_preview.jpg" />
    <meta property="og:title" content="How to configure passbolt to use Duo OTP" />
    <meta property="og:description" content="" />
    <link rel="stylesheet" href="https://help.passbolt.com/assets/css/help.min.css">
    <link rel="stylesheet" href="https://help.passbolt.com/assets/css/highlight.css">
    <link rel="stylesheet" href="https://help.passbolt.com/assets/css/cookie-eu-banner.css">
    <link rel="stylesheet" href="https://help.passbolt.com/assets/css/custom.css">
    <link rel="canonical" href="https://help.passbolt.com/configure/mfa/duo">
    <link rel="shortcut icon" type="image/x-icon" href="https://help.passbolt.com/assets/favicon.ico" />
    <link rel="alternate" type="application/rss+xml" title="Passbolt | Help" href="https://help.passbolt.com/feed.xml">
</head>


<body>
    <div id="container" class="help page background">
            <header>
        <div class="header first ">
            <nav class="greedy">
                <div class="top navigation primary">
                    <ul class="links clearfix">
                        <li class="home with-text"><a href="http://www.passbolt.com/"><span>home</span></a></li>
                        <li class="left"><a href="https://www.passbolt.com/services"><span>pricing</span></a></li>
                        <li class="left"><a href="https://www.passbolt.com/roadmap"><span>roadmap</span></a></li>
                        <li class="left"><a href="https://community.passbolt.com/"><span>forum</span></a></li>
                        <li class="left"><a href="https://www.passbolt.com/blog"><span>blog</span></a></li>
                        <li class="left selected"><a href="https://help.passbolt.com/"><span>help</span></a></li>
                        <li class="left"><a href="https://demo.passbolt.com" class="highlighted" target="_blank" rel="noopener"><span>try it!</span></a></li>
                    </ul>
                    <button class="hidden" count="0">more</button>
                    <ul class="hidden-links hidden"></ul>
                </div>
            </nav>
        </div>
    </header>
    <div class="header second">
        <div class="col1">
            <div class="logo no-img">
                <h1><span>Passbolt</span></h1>
            </div>
        </div>
        <div class="col2 search-wrapper">
            <h2 class="visuallyhidden">Help Search</h2>
            <div>
                <form class="search ready" action="/search.html" method="get">
                    <div class="input required">
                        <label for="search-box">Search</label>
                        <input id="search-box" name="query" maxlength="64" placeholder="Help search" class="fuzzy-search" type="search">
                    </div>
                    <button value="search">
                        <i class="fa fa-fw fa-search"></i>
                        <span class="text visuallyhidden">search</span>
                    </button>
                </form>
            </div>
        </div>
        <div class="col3">
            <div class="edit-on-github">
                <a href="https://github.com/passbolt/passbolt_help/edit/master/_posts/configure/2018-11-14-configure-mfa-duo.md" class="button">
                    <i class="fa fa-github-alt fa-fw"></i> Edit on github</a>
            </div>
        </div>
    </div>

        <div class="panel main" aria-label="Content">
            <div class="panel left">
                
                









<div class="navigation-help" role="navigation">
    <ul>
        <li>
            <h2>Configure</h2>
        </li>
        
        <li >
            <a href="https://help.passbolt.com/configure/https">Configure HTTPS</a>
        </li>
        
        
        <li >
            <a href="https://help.passbolt.com/configure/ldap/setup">Configure LDAP</a>
        </li>
        
        
        <li >
            <a href="https://help.passbolt.com/configure/account-recovery">Configure Account Recovery</a>
        </li>
        
        
        <li >
            <a href="https://help.passbolt.com/configure/sso/azure">Configure SSO</a>
        </li>
        
        
        <li >
            <a href="https://help.passbolt.com/configure/ldap/ldap-with-ssl">Configure LDAP with ssl</a>
        </li>
        
        
        <li >
            <a href="https://help.passbolt.com/configure/ldap/ldap-common-sync-error-messages">Troubleshoot LDAP sync errors</a>
        </li>
        
        
        <li >
            <a href="https://help.passbolt.com/configure/mfa/yubikey">Configure Yubikey</a>
        </li>
        
        
        <li class="selected"
            >
            <a href="https://help.passbolt.com/configure/mfa/duo">Configure Duo</a>
        </li>
        
        
        <li >
            <a href="https://help.passbolt.com/configure/mfa/totp">Configure TOTP</a>
        </li>
        
        
        <li >
            <a href="https://help.passbolt.com/configure/notification/email">Configure Email Notifications</a>
        </li>
        
        
        <li >
            <a href="https://help.passbolt.com/configure/email/setup">Configure Email providers</a>
        </li>
        
        
        <li >
            <a href="https://help.passbolt.com/faq/hosting/why-email-not-sent">Troobleshoot Email config</a>
        </li>
        
        
        <li >
            <a href="https://help.passbolt.com/configure/environment/reference">Environment variable reference</a>
        </li>
        
        
        <li >
            <a href="https://help.passbolt.com/configure/database/credentials">Update database credentials</a>
        </li>
        
        
    </ul>
</div>








                
            </div>
            <div class="panel middle" data-spy="scroll" data-target=".scrollspy">
                <div class="grid grid-responsive-12">
                    <article>
                        <div class="row" id="introduction">
    <div class="col12">
        <div class="breadcrumbs">
            <ul>
                <li>
                    <div class="main-cell">
                        <a href="https://www.passbolt.com"><span>home</span></a>
                    </div>
                </li>
                <li>
                    <div class="main-cell">
                        <a href="/"><span>help</span></a>
                    </div>
                </li>
                
                
                <li>
                    <div class="main-cell">
                        <a href="https://help.passbolt.com/configure"><span>configure</span></a>
                    </div>
                </li>
                
                <li>
                    <div class="main-cell">
                        <a href="https://help.passbolt.com/configure/mfa"><span>mfa</span></a>
                    </div>
                </li>
                
                
                
                
                <li>
                    <div class="main-cell">
                        <a href="https://help.passbolt.com/configure/mfa/duo.html"><span>duo</span></a>
                    </div>
                </li>
                
            </ul>
        </div>
    </div>
</div>

                        <div class="row" markdown="1">
<div class="col7" markdown="1">
<h1>How to configure passbolt to use Duo OTP</h1>
</div>
</div>

                        <div class="row">
  <div class="col7">

    <p>Passbolt Pro Edition since v2.5 and CE since 3.9 support Duo as a multi factor authentication option.
Duo is a proprietary solution that is free for up to 10 users, and supports a bundle
of authentication channels (such as HOTP, mobile push, phone calls, etc.) configurable
by the Duo account administrator.</p>

    <figure>
    <img src="https://help.passbolt.com/assets/img/help/2023/02/mfa-duo-website.png" alt="Duo website" style="max-width:550px;" />
    <span class="legend">fig. Duo website</span>
</figure>

    <div class="message warning">
        <p>
            <strong>Important:</strong> Multi Factor Authentication requires HTTPS to work.
        </p>  
    </div>
   
    <div class="message warning">
        <p>
            <strong>Important:</strong> DUO is not currently supported for MFA on passbolt mobile 
            app. Therefore, if DUO is the only option selected it will result in blocking access to the 
            mobile app. However, if an additional MFA option is selected, the mobile app will be able
            to use the additional option while other devices can use DUO.
        </p>
    </div>

    <h2 id="security-considerations">Security considerations</h2>

    <p>It is important to enable and setup at least one additional multi factor authentication 
provider in case Duo service becomes temporarily not available.</p>

    <p>In order to authenticate using Duo, the user will be redirected to Duo’s authentication
page. Whether or not the authentication was successful, the user will be redirected back
to passbolt. Make sure your users have access to internet or do
not enable this authentication provider if you are running passbolt on a private network
that is not connected to internet.</p>

    <h2 id="install-duo-app">Install Duo app</h2>

    <p>In order to use this authentication provider, each of your users will need to have either:</p>
    <ul>
      <li><a href="https://play.google.com/store/apps/details?id=com.duosecurity.duomobile&amp;hl=en">Duo Mobile for Android</a> on google play store.</li>
      <li><a href="https://itunes.apple.com/us/app/duo-mobile/id422663827?mt=8">Duo Mobile for iOS</a> on apple itunes.</li>
      <li>TouchID fingerprint reader on MacOS laptops</li>
      <li>A security key</li>
      <li>A physical token</li>
      <li>A network administrator</li>
    </ul>

    <div class="message notice">
    <p>
    Visit the <a href="https://duo.com/product/multi-factor-authentication-mfa/authentication-methods">Duo authentication methods page</a> for more information.
    </p>
    
</div>

    <figure>
    <img src="https://help.passbolt.com/assets/img/help/2023/02/mfa-duo-app-login.png" alt="Duo mobile application" style="max-width:250px;" />
    <span class="legend">fig. Duo mobile application</span>
</figure>

    <h2 id="register-a-duo-administrator-account">Register a Duo administrator account</h2>

    <p>If you do not have a Duo admin account, first sign up at <a href="https://signup.duo.com/">https://signup.duo.com/</a>
Then log in to the Duo Admin panel at <a href="https://admin.duosecurity.com/login">https://admin.duosecurity.com/login</a></p>

    <p>Configure your Duo policies as required by your organization.</p>

    <h3 id="add-a-passbolt-application">Add a passbolt application</h3>

    <p>In order for passbolt to enable onboarding and authentication of new users with Duo,
you will need to create a Web SDK application for passbolt in Duo.</p>

    <p>Login to the <a href="https://admin.duosecurity.com/login">Duo Admin page</a>.
In the left-hand side menu, click on “Applications”, then click on “Protect an Application”.</p>

    <figure>
    <img src="https://help.passbolt.com/assets/img/help/2023/02/mfa-duo-application.png" alt="Duo protect application" style="max-width:550px;" />
    <span class="legend">fig. Duo protect application</span>
</figure>

    <p>Find the “Web SDK” application and click on the “Protect” button.</p>

    <figure>
    <img src="https://help.passbolt.com/assets/img/help/2023/02/mfa-duo-admin.png" alt="Duo administration" style="max-width:550px;" />
    <span class="legend">fig. Duo administration</span>
</figure>

    <p>Note down the Client ID, Client secret, and API hostname details, as you will need them to configure the integration.</p>

    <h2 id="set-the-configuration-in-passbolt">Set the configuration in passbolt</h2>

    <p>You can configure Duo OTP using either the admin interface or environment variables. 
If multiple settings providers are used the settings in the admin interface will override the one in environment 
variables. Note that we recommend using the admin interface, since it is more secure.</p>

    <h3 id="using-admin-user-interface">Using admin user interface</h3>

    <p>Since v2.6 a user interface is provided for administrators to setup MFA providers.
Click on “administration” in the top menu, then “multi factor authentication” on the left menu.
You can then enable or disable the Duo provider by providing the API Hostname, the Client ID, and
the Client Secret that you gathered in the previous steps. Click “save settings” when you are done.</p>

    <figure>
    <img src="https://help.passbolt.com/assets/img/help/2023/02/AD_mfa_org_settings_duo.png" alt="MFA organization settings for Duo" style="max-width:550px;" />
    <span class="legend">fig. MFA organization settings for Duo</span>
</figure>

    <h3 id="using-environment-variables">Using environment variables</h3>

    <table class="table-parameters">
<thead>
    <tr>
        <th>Variable name</th>
        <th>Description</th>
        <th>Type</th>
    </tr>
</thead>
<tbody>
    <tr>
        <td>PASSBOLT_PLUGINS_MFA_DUO_CLIENT_ID</td>
        <td>Client ID</td>
        <td>string</td>
    </tr>
    <tr>
        <td>PASSBOLT_PLUGINS_MFA_DUO_CLIENT_SECRET</td>
        <td>Client Secret</td>
        <td>string</td>
    </tr>
    <tr>
        <td>PASSBOLT_PLUGINS_MFA_DUO_API_HOSTNAME</td>
        <td>API Hostname</td>
        <td>string</td>
    </tr>
</tbody>
</table>
    <p><br /></p>

    <p>When you using docker to set these environment variable you can pass them as arguments,
like other variables such as the database name, for example:</p>

    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ docker run --name passbolt \
             -p 80:80 \
             -p 443:443 \
             -e PASSBOLT_PLUGINS_MFA_DUO_API_HOSTNAME=api-26e9f2fce.duosecurity.com \
             -e etc.
</code></pre></div>    </div>

    <h2 id="setting-duo-for-a-given-passbolt-user-account">Setting Duo for a given passbolt user account</h2>

    <p>Once you have the Duo integration configured and a Duo authentication device, you can proceed
with enabling Duo as MFA provider for your user account. It is important that you test this to
make sure the integration works.</p>

    <p>When logged in on passbolt, go to your profile section and click on “Multi factor authentication”
in the sidebar on the left. You should see the list of providers that are enabled for this instance.
Click on the Duo provider.</p>

    <figure>
    <img src="https://help.passbolt.com/assets/img/help/2023/02/mfa-duo-user-setup.png" alt="Passbolt Duo setup" style="max-width:550px;" />
    <span class="legend">fig. Passbolt Duo setup</span>
</figure>

    <p>Then, click on the “Sign-in with Duo” button to start the Duo authentication process. If this is
the first time you are using Duo with this user and this server, you will be asked to link one or
more device(s) to Duo to authenticate with.</p>

    <figure>
    <img src="https://help.passbolt.com/assets/img/help/2023/02/mfa-duo-setup-welcome.png" alt="Duo welcome screen" style="max-width:550px;" />
    <span class="legend">fig. Duo welcome screen</span>
</figure>

    <figure>
    <img src="https://help.passbolt.com/assets/img/help/2023/02/mfa-duo-setup-options.png" alt="Duo authentication options" style="max-width:550px;" />
    <span class="legend">fig. Duo authentication options</span>
</figure>

    <p>Follow the instructions provided by Duo and you should be all set.
The next time you try login from a new device, you will be presented with a Duo 
authentication prompt.</p>

    <figure>
    <img src="https://help.passbolt.com/assets/img/help/2023/02/mfa-duo-login.png" alt="Login prompt" style="max-width:550px;" />
    <span class="legend">fig. Login prompt</span>
</figure>

    <div class="last-updated">
      <h3>Last updated</h3>
      <p>This article was last updated on February 23rd, 2023.</p>
    </div>

  </div>
  <div class="col4 last push1">

    <div class="message tldr notice">
    <p>Are you experiencing issues with Passbolt Pro Edition?</p>
    <a href="mailto:contact@passbolt.com" class="button primary">Contact Pro support</a>
    <p>or <a href="https://community.passbolt.com">ask the community</a></p>

</div>

  </div>
</div>

                    </article>
                </div>
            </div>
        </div>
            <footer>
        <div class="footer">
            <ul class="footer-links">
                <li><a href="https://www.passbolt.com/licence">Terms</a></li>
                <li><a href="https://www.passbolt.com/privacy">Privacy</a></li>
                <li><a href="https://www.passbolt.com/credits">Credits</a></li>
                <li><a href="https://careers.passbolt.com">Careers</a></li>
            </ul>
        </div>
    </footer>
    <div id="cookies-eu-banner" class="visually-hidden">
        🍪 &nbsp; Do you accept cookies for statistical purposes?
        <a href="https://www.passbolt.com/privacy" id="cookies-eu-more">(Read more)</a>
        <a class="button primary" id="cookies-eu-accept">Accept</a>
        <a id="cookies-eu-reject">No thanks!</a>
    </div>


    </div>
    <script src="https://consent.cookiebot.com/uc.js" data-cbid="900808a8-f178-4994-b2ad-66bf3ccca5f7" data-blockingmode="auto" strategy="beforeInteractive"></script>
<script src="https://help.passbolt.com/assets/js/matomo-tag-manager.js"></script>
<script src="https://help.passbolt.com/assets/js/matomo-analytics.js"></script>
<script src="https://code.jquery.com/jquery-3.5.0.slim.min.js" integrity="sha384-/IFzzQmt1S744I+IQO4Mc1uphkxbXt1tEwjQ/qSw2p8pXWck09sLvqHmKDYYwReJ" crossorigin="anonymous"></script>
<script src="https://help.passbolt.com/assets/js/analytics.js"></script>
<script src="https://help.passbolt.com/assets/js/greedynav.js"></script>
</body>

</html>
